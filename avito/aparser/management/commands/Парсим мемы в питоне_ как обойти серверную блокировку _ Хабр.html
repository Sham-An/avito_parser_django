<!DOCTYPE html>
<!-- saved from url=(0044)https://habr.com/ru/company/ods/blog/346632/ -->
<html lang="ru"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Парсим мемы в питоне: как обойти серверную блокировку / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/chunk-vendors.7ca1c786.js.download" as="script"><link rel="preload" href="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/app.9220581f.css" as="style"><link rel="preload" href="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/app.e9bf5e28.js.download" as="script">
  <link rel="stylesheet" href="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/app.9220581f.css">
  <script type="text/javascript" async="" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/js"></script><script async="" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/tag.js.download"></script><script async="" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/analytics.js.download"></script><script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.92c2fbe8ee3be219addb2c22d19e5393.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/ads.js.download" onload="window[&#39;zhY4i4nJ9K&#39;] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/ods\/blog\/346632\/"},"headline":"Парсим мемы в питоне: как обойти серверную блокировку","datePublished":"2018-01-15T14:00:15+03:00","dateModified":"2018-01-15T14:54:52+03:00","author":{"@type":"Person","name":"Дмитрий Сергеев"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Новогодние праздники &mdash; прекрасный повод попрокрастинировать в уютной домашней обстановке и вспомнить дорогие сердцу мемы из 2k17, уходящие навсегда, как совесть...","url":"https:\/\/habr.com\/ru\/company\/ods\/blog\/346632\/#post-content-body","about":["c_ods","h_python","h_programming","h_data_mining","h_opendata","f_develop"],"image":["https:\/\/habrastorage.org\/webt\/qr\/lg\/rw\/qrlgrwehvwohaffw-qe5reaxm6e.jpeg","https:\/\/habrastorage.org\/webt\/a7\/wr\/de\/a7wrde9j8hwq-aztkijpk_bna8e.jpeg","https:\/\/habrastorage.org\/webt\/cg\/bw\/ps\/cgbwpskfdnsiyv7yfnrj5fugcaq.png","https:\/\/habrastorage.org\/webt\/d9\/6y\/et\/d96yet3figm2dgzqwxvd9kncc8c.png","https:\/\/habrastorage.org\/webt\/bg\/uj\/jt\/bgujjthbhbl-3rel7yaltmpt2mi.png","https:\/\/habrastorage.org\/webt\/s2\/h3\/15\/s2h315819gr9jezijhucnbl7kvk.jpeg","https:\/\/habrastorage.org\/webt\/ug\/-h\/ht\/ug-hhtcefyvc7bgfsdlzcvvepm8.png","https:\/\/habrastorage.org\/webt\/7b\/ue\/pd\/7buepdk0-3_kidrbnjhkcxsz-y4.jpeg","https:\/\/habrastorage.org\/webt\/q6\/qr\/el\/q6qrelgeilsjs40dfixamqc1pms.jpeg","https:\/\/habrastorage.org\/webt\/xe\/wt\/zo\/xewtzoghswrzqywjblkkpnovgb4.png","https:\/\/habrastorage.org\/webt\/n6\/zj\/wp\/n6zjwpi5jcem8_hia6txycdpqa0.png","https:\/\/habrastorage.org\/webt\/cr\/c4\/il\/crc4ilgqdvx2z4cfm52tlikqa-0.png","https:\/\/habrastorage.org\/webt\/e4\/dj\/lp\/e4djlpba-1rr7yo1u9yxtcbzvzo.jpeg","https:\/\/habrastorage.org\/getpro\/habr\/formulas\/6cc\/462\/399\/6cc46239975e7dc128b13acbee196a28.svg","https:\/\/habrastorage.org\/webt\/sd\/nm\/fi\/sdnmfigmsvb9f7lxvbezsykv5ci.jpeg","https:\/\/habrastorage.org\/webt\/mg\/ce\/3j\/mgce3jd8xw6dmi6lt46vpbqvvxi.png","https:\/\/habrastorage.org\/webt\/zi\/en\/tt\/zienttk5uytovnrxrx2bzuqfcrg.png"]}</script>
  <script src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/gpt.js.download" async=""></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.48.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Парсим мемы в питоне: как обойти серверную блокировку" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Парсим мемы в питоне: как обойти серверную блокировку" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Парсим мемы в питоне: как обойти серверную блокировку" data-vmid="aiturec:title"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/346632/57555708a1fa9cdcc5c25353589b4ce6/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/346632/57555708a1fa9cdcc5c25353589b4ce6/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/346632/57555708a1fa9cdcc5c25353589b4ce6/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/346632/57555708a1fa9cdcc5c25353589b4ce6/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/346632/57555708a1fa9cdcc5c25353589b4ce6/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="346632" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2018-01-15T11:00:15.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/346632/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/ods/blog/346632/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/346632/57555708a1fa9cdcc5c25353589b4ce6/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png">
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png">
  <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png">
  <link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png">
  <link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png">
  <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png">
  <link rel="apple-touch-icon" type="image/png" sizes="256x256" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png">
  <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png">
  <link rel="mask-icon" color="#77a2b6" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg">
  <link crossorigin="use-credentials" href="https://habr.com/manifest.webmanifest" rel="manifest">
<meta http-equiv="origin-trial" content="AxujKG9INjsZ8/gUq8+dTruNvk7RjZQ1oFhhgQbcTJKDnZfbzSTE81wvC2Hzaf3TW4avA76LTZEMdiedF1vIbA4AAABueyJvcmlnaW4iOiJodHRwczovL2ltYXNkay5nb29nbGVhcGlzLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2NTI3NzQ0MDAsImlzVGhpcmRQYXJ0eSI6dHJ1ZX0="><meta http-equiv="origin-trial" content="Azuce85ORtSnWe1MZDTv68qpaW3iHyfL9YbLRy0cwcCZwVnePnOmkUJlG8HGikmOwhZU22dElCcfrfX2HhrBPAkAAAB7eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2NTI3NzQ0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A16nvcdeoOAqrJcmjLRpl1I6f3McDD8EfofAYTt/P/H4/AWwB99nxiPp6kA0fXoiZav908Z8etuL16laFPUdfQsAAACBeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2NTI3NzQ0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="AxBHdr0J44vFBQtZUqX9sjiqf5yWZ/OcHRcRMN3H9TH+t90V/j3ENW6C8+igBZFXMJ7G3Pr8Dd13632aLng42wgAAACBeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiVHJ1c3RUb2tlbnMiLCJleHBpcnkiOjE2NTI3NzQ0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A88BWHFjcawUfKU3lIejLoryXoyjooBXLgWmGh+hNcqMK44cugvsI5YZbNarYvi3roc1fYbHA1AVbhAtuHZflgEAAAB2eyJvcmlnaW4iOiJodHRwczovL2dvb2dsZS5jb206NDQzIiwiZmVhdHVyZSI6IlRydXN0VG9rZW5zIiwiZXhwaXJ5IjoxNjUyNzc0NDAwLCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="><meta http-equiv="origin-trial" content="A/OOU4XAFfeAV4kM4+W9WBwNAHqq/bvtrRcJ1wpnNyO/i076BSUy1d14l2kBEgVmEuvxojSpD23172C6hBg2AQYAAACWeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjM0MDgzMTk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlLCJ1c2FnZSI6InN1YnNldCJ9"><meta http-equiv="origin-trial" content="AwrB+XVH/KV6HfZNVtSEqlUJi3yUbtCp0/TJRj+38NDIw19/9P1h7ECTtdLdhIzG0Bsl4n/0rVmttJtGUCcewgAAAACceyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjM0MDgzMTk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlLCJ1c2FnZSI6InN1YnNldCJ9"><meta http-equiv="origin-trial" content="Ax15QOERqai2A5XWrDY38Eg07xh2T0pkhpDPJuDlxr7D2Ka8wHvklgK7tTPZOnT+8H31lwHto5JpvYV8jRn1WgIAAACceyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQ29udmVyc2lvbk1lYXN1cmVtZW50IiwiZXhwaXJ5IjoxNjM0MDgzMTk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlLCJ1c2FnZSI6InN1YnNldCJ9"><script src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/pubads_impl_2021101101.js.download" async=""></script><script charset="utf-8" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/chunk-2d21ab85.421fbae8.js.download"></script><script charset="utf-8" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/hljs.e5f890a6.js.download"></script><link rel="stylesheet" type="text/css" href="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/gallery.4814d627.css"><script charset="utf-8" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/gallery.d1db5224.js.download"></script><script charset="utf-8" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/chunk-2d222042.bdf40a76.js.download"></script><meta data-vue-meta="ssr" name="description" content="Новогодние праздники — прекрасный повод попрокрастинировать в уютной домашней обстановке и вспомнить дорогие сердцу мемы из 2k17, уходящие навсегда, как совесть Electronic Arts.

Однако даже обильно..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Новогодние праздники — прекрасный повод попрокрастинировать в уютной домашней обстановке и вспомнить дорогие сердцу мемы из 2k17, уходящие навсегда, как совесть Electronic Arts.

Однако даже обильно..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Новогодние праздники — прекрасный повод попрокрастинировать в уютной домашней обстановке и вспомнить дорогие сердцу мемы из 2k17, уходящие навсегда, как совесть Electronic Arts.

Однако даже обильно..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Новогодние праздники — прекрасный повод попрокрастинировать в уютной домашней обстановке и вспомнить дорогие сердцу мемы из 2k17, уходящие навсегда, как совесть Electronic Arts.

Однако даже обильно..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Новогодние праздники — прекрасный повод попрокрастинировать в уютной домашней обстановке и вспомнить дорогие сердцу мемы из 2k17, уходящие навсегда, как совесть Electronic Arts.

Однако даже обильно..." data-vmid="aiturec:description"><script data-vue-meta="ssr" onload="window[&#39;e0044d29c024&#39;] = true" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/saved_resource" data-vmid="checklogin"></script><script charset="utf-8" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/photoswipe.2b48f110.js.download"></script></head>
<body>


<div id="app" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="https://habr.com/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="https://habr.com/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <!----> <a href="https://effect.habr.com/s/UtjJHWZDox77XchP9SUG_w.v1vDPogo2OJgSKQInXWzrW5lHEP5xrJXufuGr2hBdyaJd5non6aN-Au-h5e5IoOxgmwSNUVORCj6Nyyvt0w7hA_J8HMZVOs-o3DukW1I2Z8" target="_blank" class="tm-top-link" style="color: rgb(153, 255, 167);">
  Тест Тьюринга: робот старался, но Хабр бдит
</a> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="https://habr.com/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="https://habr.com/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="https://habr.com/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="https://habr.com/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="https://habr.com/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="https://habr.com/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="https://habr.com/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="https://habr.com/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <button class="tm-scroll-top"><span title="Наверх" class="tm-svg-icon__wrapper tm-scroll-top__arrow"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Наверх</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></span></button> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyname="ods" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="https://habr.com/ru/company/ods/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/5d0e1eb7036b66d4ff4a35ad6950cc3e.png" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">102.17</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="https://habr.com/ru/company/ods/profile/" class="tm-company-card__name">
        Open Data Science
      </a> <div class="tm-company-card__description">Крупнейшее русскоязычное Data Science сообщество</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="https://habr.com/ru/users/Skolopendriy/" title="Skolopendriy" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/2f45ef122a4e96a36e99affd9f560c71.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__username">
      Skolopendriy
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2018-01-15T11:00:15.000Z" title="2018-01-15, 14:00">15  января  2018 в 14:00</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Парсим мемы в питоне: как обойти серверную блокировку</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/company/ods/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании Open Data Science</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/python/" class="tm-article-snippet__hubs-item-link"><span>Python</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/data_mining/" class="tm-article-snippet__hubs-item-link"><span>Data Mining</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="https://habr.com/ru/hub/opendata/" class="tm-article-snippet__hubs-item-link"><span>Открытые данные</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Tutorial
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><p>Новогодние праздники — прекрасный повод попрокрастинировать в уютной домашней обстановке и вспомнить дорогие сердцу мемы из 2k17, уходящие навсегда, как совесть Electronic Arts.</p><br>
<img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/qrlgrwehvwohaffw-qe5reaxm6e.jpeg" width="250" align="right" data-src="https://habrastorage.org/webt/qr/lg/rw/qrlgrwehvwohaffw-qe5reaxm6e.jpeg"><br>
<p>Однако даже обильно сдобренная салатами совесть иногда просыпалась и требовала хоть немного взять себя в руки и заняться полезной деятельностью. Поэтому мы совместили приятное с полезным и на примере любимых мемов посмотрели, как можно спарсить себе небольшую базу<br>
данных, попутно обходя всевозможные блокировки, ловушки и ограничения, расставленные сервером на нашем пути. Всех заинтересованных любезно приглашаем под кат.</p><a name="habracut"></a><br>
<p>Машинное обучение, эконометрика, статистика и многие другие науки о данных занимаются поиском закономерностей. Каждый день доблестные аналитики-инквизиторы пытают природу разными методами и вытаскивают из неё сведенья о том, как именно устроен великий процесс порождения данных, создавший нашу вселенную. Испанские инквизиторы в своей повседневной деятельности использовали непосредственно физическое тело своей жертвы. Природа же вездесуща и не имеет однозначного физического облика. Из-за этого профессия современного инквизитора имеет странную специфику — пытки природы происходят через анализ данных, которые надо откуда-то брать. Обычно данные инквизиторам приносят мирные собиратели. Эта статейка призвана немного приоткрыть завесу тайны насчет того, откуда данные берутся и как их можно немножечко пособирать.</p><br>
<p>Нашим девизом стала знаменитая фраза капитана Джека Воробья: "Бери всё и не отдавай ничего". Иногда для сбора мемов придется использовать довольно бандитские методы. Тем не менее, мы будем оставаться мирными собирателями данных, и ни в коей мере не будем становиться бандитами. Брать мемы мы будем из главного <a href="http://knowyourmeme.com/">мемохранилища.</a></p><br>
<div style="text-align:center;"><img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/a7wrde9j8hwq-aztkijpk_bna8e.jpeg" width="250" data-src="https://habrastorage.org/webt/a7/wr/de/a7wrde9j8hwq-aztkijpk_bna8e.jpeg"></div> <br>
<h1 id="1-vlamyvaemsya-v-memohranilische">1. Вламываемся в мемохранилище</h1><br>
<h2 id="11-chto-my-hotim-poluchit">1.1. Что мы хотим получить</h2><br>
<p>Итак, мы хотим распарсить <a href="http://knowyourmeme.com/">knowyourmeme.com</a> и получить кучу разных переменных:</p><br>
<ul>
<li><strong>Name</strong> – название мема,</li>
<li><strong>Origin_year</strong> – год его создания,</li>
<li><strong>Views</strong> – число просмотров,</li>
<li><strong>About</strong> – текстовое описание мема,</li>
<li><strong> и многие другие</strong></li>
</ul><br>
<p>Более того, мы хотим сделать это без вот этого всего:</p><br>
<div style="text-align:center;"><img data-src="https://habrastorage.org/webt/cg/bw/ps/cgbwpskfdnsiyv7yfnrj5fugcaq.png" data-width="600" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/cgbwpskfdnsiyv7yfnrj5fugcaq.png" width="600"></div><br>
<p>После скачивания и чистки данных от мусора можно будет заняться строительством моделей. Например, попытаться предсказать популярность мема по его параметрам. Но это все позже, а сейчас познакомимся с парой определений:</p><br>
<ul>
<li><strong>Парсер</strong> — это скрипт, который грабит информацию с сайта</li>
<li><strong>Краулер</strong> — это часть парсера, которая бродит по ссылкам</li>
<li><strong>Краулинг</strong> — это переход по страницам и ссылкам</li>
<li><strong>Скрапинг</strong> — это сбор данных со страниц</li>
<li><strong>Парсинг</strong> — это сразу и краулинг и скрапинг!</li>
</ul><br>
<h2 id="12--chto-takoe-html">1.2. Что такое HTML</h2><br>
<p><strong>HTML (HyperText Markup Language)</strong> — это такой же язык разметки как Markdown или LaTeX. Он является стандартным для написания различных сайтов. Команды в таком языке называются <strong>тегами</strong>. Если открыть абсолютно любой сайт, нажать на правую кнопку мышки, а после нажать <code>View page source</code>, то перед вами предстанет HTML скелет этого сайта.</p><br>
<p>Можно увидеть, что HTML-страница это ни что иное как набор вложенных тегов. Можно заметить, например, следующие теги:</p><br>
<ul>
<li><code>&lt;title&gt;</code> – заголовок страницы</li>
<li><code>&lt;h1&gt;…&lt;h6&gt;</code> – заголовки разных уровней</li>
<li><code>&lt;p&gt;</code> – абзац (paragraph)</li>
<li><code>&lt;div&gt;</code> – выделения фрагмента документа с целью изменения вида содержимого</li>
<li><code>&lt;table&gt;</code> – прорисовка таблицы</li>
<li><code>&lt;tr&gt;</code> – разделитель для строк в таблице</li>
<li><code>&lt;td&gt;</code> – разделитель для столбцов в таблице</li>
<li><code>&lt;b&gt;</code> – устанавливает жирное начертание шрифта</li>
</ul><br>
<p>Обычно команда <code>&lt;...&gt;</code> открывает тег, а <code>&lt;/...&gt;</code> закрывает его. Все, что находится между этими двумя командами, подчиняется правилу, которое диктует тег. Например, все, что находится между <code>&lt;p&gt;</code> и <code>&lt;/p&gt;</code> — это отдельный абзац.</p><br>
<p>Теги образуют своеобразное дерево с корнем в теге <code>&lt;html&gt;</code> и разбивают страницу на разные логические кусочки. У каждого тега могут быть свои потомки (дети) — те теги, которые вложены в него, и свои родители.</p><br>
<p>Например, HTML-древо страницы может выглядеть вот так:</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span> Заголовок <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        Первый кусок текста со своими свойствами
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        Второй кусок текста
            <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>
                Третий, жирный кусок
            <span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    Четвёртый кусок текста
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><br>
<div style="text-align:center;"><img data-src="https://habrastorage.org/webt/d9/6y/et/d96yet3figm2dgzqwxvd9kncc8c.png" data-width="500" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/d96yet3figm2dgzqwxvd9kncc8c.png" width="500"></div><br>
<p>Можно работать с этим html как с текстом, а можно как с деревом. Обход этого дерева и есть парсинг веб-страницы. Мы всего лишь будем находить нужные нам узлы среди всего этого разнообразия и забирать из них информацию!</p><br>
<p>Вручную обходить эти деревья не очень приятно, поэтому есть специальные языки для обхода деревьев.</p><br>
<ul>
<li><a href="https://ru.wikibooks.org/wiki/CSS/%D0%A1%D0%B5%D0%BB%D0%B5%D0%BA%D1%82%D0%BE%D1%80%D1%8B">CSS-селектор</a> (это когда мы ищем элемент страницы по паре ключ, значение)</li>
<li><a href="https://ru.wikipedia.org/wiki/XPath">XPath</a> (это когда мы прописываем путь по дереву вот так: /html/body/div[1]/div[3]/div/div[2]/div)</li>
<li>Всякие разные библиотеки для всяких разных языков, например, BeautifulSoup для питона. Именно эту библиотеку мы и будем использовать.</li>
</ul><br>
<h2 id="13-nash-pervyy-zapros">1.3. Наш первый запрос</h2><br>
<p>Доступ к веб-станицам позволяет получать модуль <code>requests</code>. Подгрузим его. За компанию подгрузим ещё парочку дельных пакетов.</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> requests      <span class="hljs-comment"># Библиотека для отправки запросов</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np   <span class="hljs-comment"># Библиотека для матриц, векторов и линала</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd  <span class="hljs-comment"># Библиотека для табличек</span>
<span class="hljs-keyword">import</span> time          <span class="hljs-comment"># Библиотека для тайм-менеджмента</span></code></pre><br>
<p>Для наших благородных исследовательских целей нужно собрать данные по каждому мему с соответствующей ему страницы. Но для начала нужно получить адреса этих страниц. Поэтому открываем основную страницу со всеми выложенными мемами. Выглядит она следующим образом:</p><br>
<div style="text-align:center;"><img data-src="https://habrastorage.org/webt/bg/uj/jt/bgujjthbhbl-3rel7yaltmpt2mi.png" data-width="500" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/bgujjthbhbl-3rel7yaltmpt2mi.png" width="500"></div><br>
<p>Отсюда мы и будем тащить ссылки на каждый из перечисленных мемов. Сохраним в переменную <code>page_link</code> адрес основной страницы и откроем её при помощи библиотеки <code>requests</code>.</p><br>
<pre><code class="python hljs">page_link = <span class="hljs-string">'http://knowyourmeme.com/memes/all/page/1'</span>
response = requests.get(page_link)
response</code></pre><br>
<pre><code class="python hljs">Out: &lt;Response [<span class="hljs-number">403</span>]&gt;</code></pre><br>
<p>А вот и первая проблема! Обращаемся к <img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/s2h315819gr9jezijhucnbl7kvk.jpeg" width="280" align="right" data-src="https://habrastorage.org/webt/s2/h3/15/s2h315819gr9jezijhucnbl7kvk.jpeg"> <a href="https://en.wikipedia.org/wiki/HTTP_403">главному источнику знаний</a> и выясняем, что 403-я ошибка выдается сервером, если он доступен и способен обрабатывать запросы, но по некоторым личным причинам отказывается это делать.</p><br>
<p>Попробуем выяснить, почему. Для этого проверим, как выглядел финальный запрос, отправленный нами на сервер, а конкретнее — как выглядел наш User-Agent в глазах сервера.</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> response.request.headers.items():
    print(key+<span class="hljs-string">": "</span>+value)</code></pre><br>
<pre><code class="python hljs">Out:
User-Agent: python-requests/<span class="hljs-number">2.14</span><span class="hljs-number">.2</span>
Accept-Encoding: gzip, deflate
Accept: */*
Connection: keep-alive</code></pre><br>
<p>Похоже, мы недвусмысленно дали понять серверу, что мы сидим на питоне и используем библиотеку requests под версией 2.14.2. Скорее всего, это вызвало у сервера некоторые подозрения относительно наших благих намерений и он решил нас безжалостно отвергнуть. Для сравнения, можно посмотреть, как выглядят request-headers у здорового человека:</p><br>
<div style="text-align:center;"><img data-src="https://habrastorage.org/webt/ug/-h/ht/ug-hhtcefyvc7bgfsdlzcvvepm8.png" data-width="800" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/ug-hhtcefyvc7bgfsdlzcvvepm8.png" width="800"></div><br>
<p>Очевидно, что нашему скромному запросу не тягаться с таким обилием мета-информации, которое передается при запросе из обычного браузера. К счастью, никто нам не мешает притвориться человечными и пустить пыль в глаза сервера при помощи генерации фейкового юзер-агента. Библиотек, которые справляются с такой задачей, существует очень и очень много, лично мне больше всего нравится <a href="https://pypi.python.org/pypi/fake-useragent"><code>fake-useragent</code></a>. При вызове метода из различных кусочков будет генерироваться рандомное сочетание операционной системы, спецификаций и версии браузера, которые можно передавать в запрос:</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># подгрузим один из методов этой библиотеки</span>
<span class="hljs-keyword">from</span> fake_useragent <span class="hljs-keyword">import</span> UserAgent
UserAgent().chrome</code></pre><br>
<pre><code class="python hljs">Out: <span class="hljs-string">'Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2224.3 Safari/537.36'</span></code></pre><br>
<p>Попробуем прогнать наш запрос еще раз, уже со сгенерированным агентом</p><br>
<pre><code class="python hljs">response = requests.get(page_link, headers={<span class="hljs-string">'User-Agent'</span>: UserAgent().chrome})
response</code></pre><br>
<pre><code class="python hljs">Out: &lt;Response [<span class="hljs-number">200</span>]&gt;</code></pre><br>
<p>Замечательно, наша небольшая маскировка <img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/7buepdk0-3_kidrbnjhkcxsz-y4.jpeg" width="250" align="right" data-src="https://habrastorage.org/webt/7b/ue/pd/7buepdk0-3_kidrbnjhkcxsz-y4.jpeg">сработала и обманутый сервер покорно выдал благословенный 200 ответ — соединение установлено и данные получены, всё чудесно! Посмотрим, что же все-таки мы получили.</p><br>
<pre><code class="python hljs">html = response.content
html[:<span class="hljs-number">1000</span>]</code></pre><br>
<pre><code class="python hljs">Out: <span class="hljs-string">b'&lt;!DOCTYPE html&gt;\n&lt;html xmlns:fb=\'http://www.facebook.com/2008/fbml\' xmlns=\'http://www.w3.org/1999/xhtml\'&gt;\n&lt;head&gt;\n&lt;meta content=\'text/html; charset=utf-8\' http-equiv=\'Content-Type\'&gt;\n&lt;script type="text/javascript"&gt;window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"c1a6d52f38","applicationID":"31165848","transactionName":"dFdfRUpeWglTQB8GDUNKWFRLHlcJWg==","queueTime":0,"applicationTime":59,"agent":""}&lt;/script&gt;\n&lt;script type="text/javascript"&gt;window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o&lt;n.length;o++)r(n[o]);return r}({1:[function(e,t,n){function r(){}function o(e,t,n){return function(){return i(e,[f.now()].concat(u(arguments)),t?null:this,n),t?void 0:this}}var i=e("handle"),a=e(2),u=e(3),c=e("ee").get("tracer")'</span></code></pre><br>
<p>Выглядит неудобоваримо, как насчет сварить из этого дела что-то покрасивее? Например, прекрасный суп.</p><br>
<h2 id="14-prekrasnyy-sup">1.4. Прекрасный суп</h2><br>
<img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/q6qrelgeilsjs40dfixamqc1pms.jpeg" width="200" align="right" data-src="https://habrastorage.org/webt/q6/qr/el/q6qrelgeilsjs40dfixamqc1pms.jpeg"><br>
<p>Пакет <strong><a href="https://www.crummy.com/software/BeautifulSoup/">bs4, a.k.a BeautifulSoup</a></strong> (тут есть гиперссылка на лучшего друга человека — документацию) был назван в честь стишка про прекрасный суп из Алисы в стране чудес.</p><br>
<p>Прекрасный суп — это совершенно волшебная библиотека, которая из сырого и необработанного HTML кода страницы выдаст вам структурированный массив данных, по которому очень удобно искать необходимые теги, классы, атрибуты, тексты и прочие элементы веб страниц.</p><br>
<blockquote>Пакет под названием <code>BeautifulSoup</code> — скорее всего, не то, что нам нужно. Это третья версия (<em>Beautiful Soup 3</em>), а мы будем использовать четвертую. Нужно будет установить пакет <code>beautifulsoup4</code>. Чтобы было совсем весело, при импорте нужно указывать другое название пакета — <code>bs4</code>, а импортировать функцию под названием <code>BeautifulSoup</code>. В общем, сначала легко запутаться, но эти трудности нужно преодолеть.</blockquote><p>С необработанным XML кодом страницы пакет также работает (XML — это исковерканый и превращённый в диалект, с помощью своих команд, HTML). Для того, чтобы пакет корректно работал с XML разметкой, придётся в довесок ко всему нашему арсеналу установить пакет <code>xml</code>.</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup</code></pre><br>
<p>Передадим функции <code>BeautifulSoup</code> текст веб-страницы, которую мы недавно получили.</p><br>
<pre><code class="python hljs">soup = BeautifulSoup(html,<span class="hljs-string">'html.parser'</span>) <span class="hljs-comment"># В опции также можно указать lxml,</span>
                                         <span class="hljs-comment"># если предварительно установить одноименный пакет</span></code></pre><br>
<p>Получим что-то вот такое:</p><br>
<pre><code class="python hljs">&lt;!DOCTYPE html&gt;

&lt;html xmlns=<span class="hljs-string">"http://www.w3.org/1999/xhtml"</span> xmlns:fb=<span class="hljs-string">"http://www.facebook.com/2008/fbml"</span>&gt;
&lt;head&gt;
&lt;meta content=<span class="hljs-string">"text/html; charset=utf-8"</span> http-equiv=<span class="hljs-string">"Content-Type"</span>/&gt;
&lt;script type=<span class="hljs-string">"text/javascript"</span>&gt;window.NREUM||(NREUM={});NREUM.info={<span class="hljs-string">"beacon"</span>:<span class="hljs-string">"bam.nr-data.net"</span>,<span class="hljs-string">"errorBeacon"</span>:<span class="hljs-string">"bam.nr-data.net"</span>,<span class="hljs-string">"licenseKey"</span>:<span class="hljs-string">"c1a6d52f38"</span>,<span class="hljs-string">"applicationID"</span>:<span class="hljs-string">"31165848"</span>,<span class="hljs-string">"transactionName"</span>:<span class="hljs-string">"dFdfRUpeWglTQB8GDUNKWFRLHkUNWUU="</span>,<span class="hljs-string">"queueTime"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"applicationTime"</span>:<span class="hljs-number">24</span>,<span class="hljs-string">"agent"</span>:<span class="hljs-string">""</span>}&lt;/script&gt;
&lt;script type=<span class="hljs-string">"text/javascript"</span>&gt;window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){<span class="hljs-keyword">if</span>(!n[t]){var o=n[t]={exports:{}};e[t][<span class="hljs-number">0</span>].call(o.exports,function(n){var o=e[t][<span class="hljs-number">1</span>][n];<span class="hljs-keyword">return</span> r(o||n)},o,o.exports)}<span class="hljs-keyword">return</span> n[t].exports}<span class="hljs-keyword">if</span>(<span class="hljs-string">"function"</span>==typeof __nr_require)<span class="hljs-keyword">return</span> __nr_require;<span class="hljs-keyword">for</span>(var o=<span class="hljs-number">0</span>;o&lt;t.length;o++)r(t[o]);<span class="hljs-keyword">return</span> r}({<span class="hljs-number">1</span>:[function(e,n,t){function r(){}function o(e,n,t){<span class="hljs-keyword">return</span> function(){<span class="hljs-keyword">return</span> i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void <span class="hljs-number">0</span>:this}}var i=e(<span class="hljs-string">"handle"</span>),a=e(<span class="hljs-number">2</span>),u=e(<span class="hljs-number">3</span>),f=e(<span class="hljs-string">"ee"</span>).get(<span class="hljs-string">"tracer"</span>),c=e(<span class="hljs-string">"loader"</span>),s=NREUM;<span class="hljs-string">"undefined"</span>==typeof window.newrelic&amp;&amp;(newrelic=s);var p=</code></pre><br>
<p>Стало намного лучше, не правда ли? Что же лежит в переменной <code>soup</code>? Невнимательный пользователь, скорее всего, скажет, что ничего вообще не изменилось. Тем не менее, это не так. Теперь мы можем свободно бродить по HTML-дереву страницы, искать детей, родителей и вытаскивать их!</p><br>
<p>Например, можно бродить по вершинам, указывая путь из тегов.</p><br>
<pre><code class="python hljs">soup.html.head.title</code></pre><br>
<pre><code class="python hljs">Out:  &lt;title&gt;All Entries | Know Your Meme&lt;/title&gt;</code></pre><br>
<p>Можно вытащить из того места, куда мы забрели, текст с помощью метода <code>text</code>.</p><br>
<pre><code class="python hljs">soup.html.head.title.text</code></pre><br>
<pre><code class="python hljs">Out: <span class="hljs-string">'All Entries | Know Your Meme'</span></code></pre><br>
<p>Более того, зная адрес элемента, мы сразу можем найти его. Например, можно сделать это по классу. Следующая команда должна найти элемент, который лежит внутри тега <code>a</code> и имеет класс <code>photo</code>.</p><br>
<pre><code class="python hljs">obj = soup.find(<span class="hljs-string">'a'</span>, attrs = {<span class="hljs-string">'class'</span>:<span class="hljs-string">'photo'</span>})
obj</code></pre><br>
<pre><code class="python hljs">Out: &lt;a <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">photo</span> <span class="hljs-title">left</span>" <span class="hljs-title">href</span>="/<span class="hljs-title">memes</span>/<span class="hljs-title">nu</span>-<span class="hljs-title">male</span>-<span class="hljs-title">smile</span>" <span class="hljs-title">target</span>="<span class="hljs-title">_self</span>"&gt;&lt;<span class="hljs-title">img</span> <span class="hljs-title">alt</span>='<span class="hljs-title">The</span> "<span class="hljs-title">Nu</span>-<span class="hljs-title">Male</span> <span class="hljs-title">Smile</span>" <span class="hljs-title">Is</span> <span class="hljs-title">Duck</span> <span class="hljs-title">Face</span> <span class="hljs-title">for</span> <span class="hljs-title">Men</span>' <span class="hljs-title">data</span>-<span class="hljs-title">src</span>="<span class="hljs-title">http</span>:</span>//i0.kym-cdn.com/featured_items/icons/wide/<span class="hljs-number">000</span>/<span class="hljs-number">007</span>/<span class="hljs-number">585</span>/<span class="hljs-number">7</span>a2.jpg<span class="hljs-string">" height="</span><span class="hljs-number">112</span><span class="hljs-string">" src="</span>http://a.kym-cdn.com/assets/blank-b3f96f160b75b1b49b426754ba188fe8.gi<span class="hljs-string">f" title='The "</span>Nu-Male Smile<span class="hljs-string">" Is Duck Face for Men' width="</span><span class="hljs-number">198</span><span class="hljs-string">"/&gt; &lt;div class="</span>info abs<span class="hljs-string">"&gt; &lt;div class="</span>c<span class="hljs-string">"&gt; The "</span>Nu-Male Smile<span class="hljs-string">" Is Duck Face for Men &lt;/div&gt; &lt;/div&gt; &lt;/a&gt;</span></code></pre><br>
<p>Однако, вопреки нашим ожиданиям, вытащенный объект имеет класс <code>"photo left"</code>. Оказывается, <code>BeautifulSoup4</code> расценивает аттрибуты <code>class</code> как набор отдельных значений, поэтому <code>"photo left"</code> для библиотеки равносильно <code>["photo", "left"]</code>, а указанное нами значение этого класса <code>"photo"</code> входит в этот список. Чтобы избежать такой неприятной ситуации и проходов по ненужным нам ссылкам, придется воспользоваться собственной функцией и задать строгое соответствие:</p><br>
<pre><code class="python hljs">obj = soup.find(<span class="hljs-keyword">lambda</span> tag: tag.name == <span class="hljs-string">'a'</span> <span class="hljs-keyword">and</span> tag.get(<span class="hljs-string">'class'</span>) == [<span class="hljs-string">'photo'</span>])
obj</code></pre><br>
<pre><code class="python hljs">Out: &lt;a <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">photo</span>" <span class="hljs-title">href</span>="/<span class="hljs-title">memes</span>/<span class="hljs-title">people</span>/<span class="hljs-title">mf</span>-<span class="hljs-title">doom</span>"&gt;&lt;<span class="hljs-title">img</span> <span class="hljs-title">alt</span>="<span class="hljs-title">MF</span> <span class="hljs-title">DOOM</span>" <span class="hljs-title">data</span>-<span class="hljs-title">src</span>="<span class="hljs-title">http</span>:</span>//i0.kym-cdn.com/entries/icons/medium/<span class="hljs-number">000</span>/<span class="hljs-number">025</span>/<span class="hljs-number">149</span>/<span class="hljs-number">1489698959244.j</span>pg<span class="hljs-string">" src="</span>http://a.kym-cdn.com/assets/blank-b3f96f160b75b1b49b426754ba188fe8.gi<span class="hljs-string">f" title="</span>MF DOOM<span class="hljs-string">"/&gt; &lt;div class="</span>entry-labels<span class="hljs-string">"&gt; &lt;span class="</span>label label-submission<span class="hljs-string">"&gt; Submission &lt;/span&gt; &lt;span class="</span>label<span class="hljs-string">" style="</span>background: <span class="hljs-comment">#d32f2e; color: white;"&gt;Person&lt;/span&gt; &lt;/div&gt; &lt;/a&gt;</span></code></pre><br>
<p>Полученный после поиска объект также обладает структурой bs4. Поэтому можно продолжить искать нужные нам объекты уже в нём! Вытащим ссылку на этот мем. Сделать это можно по атрибуту <code>href</code>, в котором лежит наша ссылка.</p><br>
<pre><code class="python hljs">obj.attrs[<span class="hljs-string">'href'</span>]</code></pre><br>
<pre><code class="python hljs">Out: <span class="hljs-string">'/memes/people/mf-doom'</span></code></pre><br>
<p>Обратите внимание, что после всех этих безумных преобразований у данных поменялся тип. Теперь они <code>str</code>. Это означет, что с ними можно работать как с текстом и пускать в ход для отсеивания лишней информации регулярные выражения.</p><br>
<pre><code class="python hljs">print(<span class="hljs-string">"Тип данных до вытаскивания ссылки:"</span>, type(obj))
print(<span class="hljs-string">"Тип данных после вытаскивания ссылки:"</span>, type(obj.attrs[<span class="hljs-string">'href'</span>]))</code></pre><br>
<pre><code class="python hljs">Out:
Тип данных до вытаскивания ссылки: &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> '<span class="hljs-title">bs4</span>.<span class="hljs-title">element</span>.<span class="hljs-title">Tag</span>'&gt;
Тип данных после вытаскивания ссылки:</span> &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> '<span class="hljs-title">str</span>'&gt;</span></code></pre><br>
<p>Если несколько элементов на странице обладают указанным адресом, то метод <code>find</code> вернёт только самый первый. Чтобы найти все элементы с таким адресом, нужно использовать метод <code>findAll</code>, и на выход будет выдан список. Таким образом, мы можем получить одним поиском сразу все объекты, содержащие ссылки на страницы с мемами.</p><br>
<pre><code class="python hljs">meme_links = soup.findAll(<span class="hljs-keyword">lambda</span> tag: tag.name == <span class="hljs-string">'a'</span> <span class="hljs-keyword">and</span> tag.get(<span class="hljs-string">'class'</span>) == [<span class="hljs-string">'photo'</span>])
meme_links[:<span class="hljs-number">3</span>]</code></pre><br>
<pre><code class="python hljs">Out: [&lt;a <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">photo</span>" <span class="hljs-title">href</span>="/<span class="hljs-title">memes</span>/<span class="hljs-title">people</span>/<span class="hljs-title">mf</span>-<span class="hljs-title">doom</span>"&gt;&lt;<span class="hljs-title">img</span> <span class="hljs-title">alt</span>="<span class="hljs-title">MF</span> <span class="hljs-title">DOOM</span>" <span class="hljs-title">data</span>-<span class="hljs-title">src</span>="<span class="hljs-title">http</span>:</span>//i0.kym-cdn.com/entries/icons/medium/<span class="hljs-number">000</span>/<span class="hljs-number">025</span>/<span class="hljs-number">149</span>/<span class="hljs-number">1489698959244.j</span>pg<span class="hljs-string">" src="</span>http://a.kym-cdn.com/assets/blank-b3f96f160b75b1b49b426754ba188fe8.gi<span class="hljs-string">f" title="</span>MF DOOM<span class="hljs-string">"/&gt; &lt;div class="</span>entry-labels<span class="hljs-string">"&gt; &lt;span class="</span>label label-submission<span class="hljs-string">"&gt; Submission &lt;/span&gt; &lt;span class="</span>label<span class="hljs-string">" style="</span>background: <span class="hljs-comment">#d32f2e; color: white;"&gt;Person&lt;/span&gt; &lt;/div&gt; &lt;/a&gt;,</span>
 &lt;a <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">photo</span>" <span class="hljs-title">href</span>="/<span class="hljs-title">memes</span>/<span class="hljs-title">here</span>-<span class="hljs-title">lies</span>-<span class="hljs-title">beavis</span>-<span class="hljs-title">he</span>-<span class="hljs-title">never</span>-<span class="hljs-title">scored</span>"&gt;&lt;<span class="hljs-title">img</span> <span class="hljs-title">alt</span>="<span class="hljs-title">Here</span> <span class="hljs-title">Lies</span> <span class="hljs-title">Beavis</span>. <span class="hljs-title">He</span> <span class="hljs-title">Never</span> <span class="hljs-title">Scored</span>." <span class="hljs-title">data</span>-<span class="hljs-title">src</span>="<span class="hljs-title">http</span>:</span>//i0.kym-cdn.com/entries/icons/medium/<span class="hljs-number">000</span>/<span class="hljs-number">025</span>/<span class="hljs-number">148</span>/maxresdefault.jpg<span class="hljs-string">" src="</span>http://a.kym-cdn.com/assets/blank-b3f96f160b75b1b49b426754ba188fe8.gi<span class="hljs-string">f" title="</span>Here Lies Beavis. He Never Scored.<span class="hljs-string">"/&gt; &lt;div class="</span>entry-labels<span class="hljs-string">"&gt; &lt;span class="</span>label label-submission<span class="hljs-string">"&gt; Submission &lt;/span&gt; &lt;/div&gt; &lt;/a&gt;,
 &lt;a class="</span>photo<span class="hljs-string">" href="</span>/memes/people/vanossgaming<span class="hljs-string">"&gt;&lt;img alt="</span>VanossGaming<span class="hljs-string">" data-src="</span>http://i0.kym-cdn.com/entries/icons/medium/<span class="hljs-number">000</span>/<span class="hljs-number">025</span>/<span class="hljs-number">147</span>/Evan-Fong-e1501621844732.jpg<span class="hljs-string">" src="</span>http://a.kym-cdn.com/assets/blank-b3f96f160b75b1b49b426754ba188fe8.gi<span class="hljs-string">f" title="</span>VanossGaming<span class="hljs-string">"/&gt; &lt;div class="</span>entry-labels<span class="hljs-string">"&gt; &lt;span class="</span>label label-submission<span class="hljs-string">"&gt; Submission &lt;/span&gt; &lt;span class="</span>label<span class="hljs-string">" style="</span>background: <span class="hljs-comment">#d32f2e; color: white;"&gt;Person&lt;/span&gt; &lt;/div&gt; &lt;/a&gt;]</span></code></pre><br>
<p>Осталось очистить полученный список от мусора:</p><br>
<pre><code class="python hljs">meme_links = [link.attrs[<span class="hljs-string">'href'</span>] <span class="hljs-keyword">for</span> link <span class="hljs-keyword">in</span> meme_links]
meme_links[:<span class="hljs-number">10</span>]</code></pre><br>
<pre><code class="python hljs">Out: [<span class="hljs-string">'/memes/people/mf-doom'</span>,
 <span class="hljs-string">'/memes/here-lies-beavis-he-never-scored'</span>,
 <span class="hljs-string">'/memes/people/vanossgaming'</span>,
 <span class="hljs-string">'/memes/stream-sniping'</span>,
 <span class="hljs-string">'/memes/kids-describe-god-to-an-illustrator'</span>,
 <span class="hljs-string">'/memes/bad-teacher'</span>,
 <span class="hljs-string">'/memes/people/adam-the-creator'</span>,
 <span class="hljs-string">'/memes/but-can-you-do-this'</span>,
 <span class="hljs-string">'/memes/people/ken-ashcorp'</span>,
 <span class="hljs-string">'/memes/heartbroken-cowboy'</span>]</code></pre><br>
<p>Готово, получили ровно 16 ссылок по числу мемов на одной странице поиска.</p><br>
<p>Хорошо, то, что можно искать элемент по его адресу, конечно же, круто, но откуда взять этот адрес? Можно установить для своего браузера какую-нибудь утилиту, позволяющую вытаскивать со страницы нужные теги, например, <a href="http://selectorgadget.com/">selectorgadget.</a></p><br>
<p>Тем не менее, этот путь не подходит для истинного самурая. Для последователей бусидо есть другой способ — искать теги для каждого нужного нам элемента вручную. Для этого придётся жать правой кнопкой мышки по окну браузера и тыкать кнопку <strong>Inspect</strong>. После всех этих манипуляций браузер будет выглядеть как-то вот так:</p><br>
<div style="text-align:center;"><img data-src="https://habrastorage.org/webt/xe/wt/zo/xewtzoghswrzqywjblkkpnovgb4.png" data-width="800" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/xewtzoghswrzqywjblkkpnovgb4.png" width="800"></div><br>
<p>Выскочивший кусок html, в котором находится адрес выбранного вами объекта, можно смело копировать в код и наслаждаться своей брутальностью.</p><br>
<p>Остался последний момент. Когда мы скачаем все мемы с текущей страницы, нам нужно будет каким-то образом забраться на соседнюю. На сайте это можно делать просто пролистывая страницу с мемами вниз, javascript-функции подтянут новые мемы на текущее окно, но сейчас трогать эти функции не хочется.</p><br>
<p>Обычно, все параметры, которые мы устанавливаем на сайте для поиска, отображаются на структуре хрефа. Мемы не являются исключением. Если мы хотим получить первую порцию мемов, мы должны будем обратиться к сайту по ссылке</p><br>
<blockquote><a href="http://knowyourmeme.com/memes/all/page/1">http://knowyourmeme.com/memes/all/page/1</a></blockquote><p>Если мы захотим получить вторую поцию с шестнадцатью мемами, нам придётся немного видоизменить ссылку, а именно заменить номер страницы на 2.</p><br>
<blockquote><a href="http://knowyourmeme.com/memes/all/page/2">http://knowyourmeme.com/memes/all/page/2</a></blockquote><p>Таким незатейливым образом мы сможем пройтись по всем страницам и ограбить мемохранилище. Наконец, обернем в красивую функцию все-все манипуляции, проделанные выше:</p><br>
<div class="spoiler"><b class="spoiler_title">Функция для скачивания ссылок на мемы</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getPageLinks</span><span class="hljs-params">(page_number)</span>:</span>
    <span class="hljs-string">"""
        Возвращает список ссылок на мемы, полученный с текущей страницы

        page_number: int/string
            номер страницы для парсинга

    """</span>
    <span class="hljs-comment"># составляем ссылку на страницу поиска</span>
    page_link = <span class="hljs-string">'http://knowyourmeme.com/memes/all/page/{}'</span>.format(page_number)

    <span class="hljs-comment"># запрашиваем данные по ней</span>
    response = requests.get(page_link, headers={<span class="hljs-string">'User-Agent'</span>: UserAgent().chrome})

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> response.ok:
        <span class="hljs-comment"># если сервер нам отказал, вернем пустой лист для текущей страницы</span>
        <span class="hljs-keyword">return</span> []

    <span class="hljs-comment"># получаем содержимое страницы и переводим в суп</span>
    html = response.content
    soup = BeautifulSoup(html,<span class="hljs-string">'html.parser'</span>)

    <span class="hljs-comment"># наконец, ищем ссылки на мемы и очищаем их от ненужных тэгов</span>
    meme_links = soup.findAll(<span class="hljs-keyword">lambda</span> tag: tag.name == <span class="hljs-string">'a'</span> <span class="hljs-keyword">and</span> tag.get(<span class="hljs-string">'class'</span>) == [<span class="hljs-string">'photo'</span>])
    meme_links = [<span class="hljs-string">'http://knowyourmeme.com'</span> + link.attrs[<span class="hljs-string">'href'</span>] <span class="hljs-keyword">for</span> link <span class="hljs-keyword">in</span> meme_links]

    <span class="hljs-keyword">return</span> meme_links</code></pre></div></div><br>
<p>Протестируем функцию и убедимся, что всё хорошо</p><br>
<pre><code class="python hljs">meme_links = getPageLinks(<span class="hljs-number">1</span>)
meme_links[:<span class="hljs-number">2</span>]</code></pre><br>
<pre><code class="python hljs">Out: [<span class="hljs-string">'http://knowyourmeme.com/memes/people/mf-doom'</span>,
 <span class="hljs-string">'http://knowyourmeme.com/memes/here-lies-beavis-he-never-scored'</span>]</code></pre><br>
<p>Отлично, функция работает и теперь мы теоретически можем достать ссылки на все 17171 мем, для чего нам придется пройтись по 17171/16 ~ 1074 страницам. Прежде чем расстраивать сервер таким количеством запросов, посмотрим, как доставать всю необходимую информацию о конкретном меме.</p><br>
<h2 id="15-finalnaya-podgotovka-k-grabezhu">1.5 Финальная подготовка к грабежу</h2><br>
<p>По аналогии со ссылками можно вытащить что угодно. Для этого надо сделать несколько шагов: </p><br>
<ol>
<li>Открываем страничку с мемом</li>
<li>Находим любым способом тег для нужной нам информации</li>
<li>Пихаем всё это в прекрасный суп</li>
<li>......</li>
<li>Profit </li>
</ol><br>
<p>Для закрепления информации в голове любознательного читателя, вытащим число просмотров мема.</p><br>
<p>А в качестве примера возьмем самый популярный на этом сайте мем — Doge, набравший более 12 миллионов просмотров по состоянию на 1 января 2018 года. </p><br>
<p>Сама страница, с которой мы будем доставать дорогую нашему исследовательскому сердцу информацию выглядит следуюшим образом:</p><br>
<img data-src="https://habrastorage.org/webt/n6/zj/wp/n6zjwpi5jcem8_hia6txycdpqa0.png" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/n6zjwpi5jcem8_hia6txycdpqa0.png"><br>
<p>Как и прежде, для начала сохраним ссылку на страницу в переменную и вытащим по ней контент.</p><br>
<pre><code class="python hljs">meme_page = <span class="hljs-string">'http://knowyourmeme.com/memes/doge'</span>
response = requests.get(meme_page, headers={<span class="hljs-string">'User-Agent'</span>: UserAgent().chrome})
html = response.content
soup = BeautifulSoup(html,<span class="hljs-string">'html.parser'</span>)</code></pre><br>
<p>Посмотрим, как можно вытащить статистику просмотров, комментариев, а также числа загруженных видео и фото, связанных с нашим мемов. Всё это добро хранится справа вверху под тэгами <code>"dd"</code> и с классами <code>"views"</code>, <code>"videos"</code>, <code>"photos"</code> и <code>"comments"</code></p><br>
<pre><code class="python hljs">views = soup.find(<span class="hljs-string">'dd'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'views'</span>})
print(views)</code></pre><br>
<pre><code class="python hljs">Out:
&lt;dd <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">views</span>" <span class="hljs-title">title</span>="12,318,185 <span class="hljs-title">Views</span>"&gt;
&lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="/<span class="hljs-title">memes</span>/<span class="hljs-title">doge</span>" <span class="hljs-title">rel</span>="<span class="hljs-title">nofollow</span>"&gt;12,318,185&lt;/<span class="hljs-title">a</span>&gt;
&lt;/<span class="hljs-title">dd</span>&gt;</span></code></pre><br>
<p>Очистим от тэгов и пунктуации</p><br>
<pre><code class="python hljs">views = views.find(<span class="hljs-string">'a'</span>).text
views = int(views.replace(<span class="hljs-string">','</span>, <span class="hljs-string">''</span>))
print(views)</code></pre><br>
<pre><code class="python hljs">Out:
<span class="hljs-number">12318185</span></code></pre><br>
<p>Снова запихнём всё это в небольшую функцию.</p><br>
<div class="spoiler"><b class="spoiler_title">Функция, возвращающая статистику по мему</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getStats</span><span class="hljs-params">(soup, stats)</span>:</span>
    <span class="hljs-string">"""
        Возвращает очищенное число просмотров/коментариев/...

        soup: объект bs4.BeautifulSoup 
            суп текущей страницы

        stats: string
            views/videos/photos/comments

    """</span>

    obj = soup.find(<span class="hljs-string">'dd'</span>, attrs={<span class="hljs-string">'class'</span>:stats})
    obj = obj.find(<span class="hljs-string">'a'</span>).text
    obj = int(obj.replace(<span class="hljs-string">','</span>, <span class="hljs-string">''</span>))

    <span class="hljs-keyword">return</span> obj</code></pre></div></div><br>
<p>Всё готово!</p><br>
<pre><code class="python hljs">views = getStats(soup, stats=<span class="hljs-string">'views'</span>)
videos = getStats(soup, stats=<span class="hljs-string">'videos'</span>)
photos = getStats(soup, stats=<span class="hljs-string">'photos'</span>)
comments = getStats(soup, stats=<span class="hljs-string">'comments'</span>)

print(<span class="hljs-string">"Просмотры: {}\nВидео: {}\nФото: {}\nКомментарии: {}"</span>.format(views, videos, photos, comments))</code></pre><br>
<pre><code class="python hljs">Out:
Просмотры: <span class="hljs-number">12318185</span>
Видео: <span class="hljs-number">59</span>
Фото: <span class="hljs-number">1645</span>
Комментарии: <span class="hljs-number">918</span></code></pre><br>
<p>Еще из интересного и исследовательского — достанем дату и время добавления мема. Если посмотреть на страницу в браузере, можно подумать, что максимум информации, который мы можем вытащить — это число лет, прошедших с момента публикации — <code>Added 4 years ago by NovaXP</code>. Однако мы так просто сдаваться не будем, полезем в кишки html и откопаем там кусок, ответственный за эту надпись:</p><br>
<div style="text-align:center;"><img data-src="https://habrastorage.org/webt/cr/c4/il/crc4ilgqdvx2z4cfm52tlikqa-0.png" data-width="550" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/crc4ilgqdvx2z4cfm52tlikqa-0.png" width="550"></div><br>
<p>Ага! Вот и подробности по дате добавления, с точностью до минуты. Элементарно</p><br>
<div style="text-align:center;"><img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/e4djlpba-1rr7yo1u9yxtcbzvzo.jpeg" width="250" data-src="https://habrastorage.org/webt/e4/dj/lp/e4djlpba-1rr7yo1u9yxtcbzvzo.jpeg"></div><br>
<pre><code class="python hljs">date = soup.find(<span class="hljs-string">'abbr'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'timeago'</span>}).attrs[<span class="hljs-string">'title'</span>]
date</code></pre><br>
<pre><code class="python hljs">Out: <span class="hljs-string">'2017-12-31T01:59:14-05:00'</span></code></pre><br>
<p>На самом деле, парсеры — дело непредсказуемое. Часто страницы, которые мы парсим, имеют очень неоднородну структуру. Например, если мы парсим мемы, на части страниц может быть указано описание, а на части нет. Как только код впервые натыкается на отсутствие описания, он выдаёт ошибку и останавливается. Чтобы нормально собрать все данные, приходится прописывать исключения. Вроде бы, хранилище мемов хорошо оборудовано и никаких внештатных ситуаций происходить не должно.<br>
Тем не менее, очень не хочется проснуться утром и увидеть, что код сделал 20 итераций, нарвался на ошибку и отрубился. Чтобы такого не произошло, можно, например, использовать конструкцию <code>try - except</code> и просто обрабатывать неугодные нам ошибки. Про исключения можно почитать <a href="https://pythonworld.ru/tipy-dannyx-v-python/isklyucheniya-v-python-konstrukciya-try-except-dlya-obrabotki-isklyuchenij.html">на просторах интернета</a>. В нашем же случае до ошибки можно и не доводить, а предварительно проверять, есть ли необходимый элемент на странице или нет при помощи обычного <code>if - else</code>, и уже после этого пытаться его распарсить.</p><br>
<p>Например, мы хотим вытащить статус мема, для этого найдем окружающие его тэги:</p><br>
<pre><code class="python hljs">properties = soup.find(<span class="hljs-string">'aside'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'left'</span>})
meme_status = properties.find(<span class="hljs-string">"dd"</span>)
meme_status</code></pre><br>
<pre><code class="python hljs">Out:
&lt;dd&gt;
Confirmed
&lt;/dd&gt;</code></pre><br>
<p>Дальше нужно вытащить из тэгов текст, а после обрубить все лишние пробелы.</p><br>
<pre><code class="python hljs">meme_status.text.strip()</code></pre><br>
<pre><code class="python hljs">Out: <span class="hljs-string">'Confirmed'</span></code></pre><br>
<p>Однако, если неожиданно выяснится, что у мема нет статуса, метод <code>find</code> вернёт пустоту. Метод <code>text</code>, в свою очередь, не сможет найти в тэгах текст и выдаст ошибку. Чтобы обезопасить себя от таких пустот, можно прописать исключение или <code>if - else</code>. Так как в текущем меме статус все-таки есть, нарочно зададим его как пустой объект, чтобы проверить, что ошибка поймается в обоих случаях</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># Делай раз! Ищем статус мема, но не находим его</span>
meme_status = <span class="hljs-literal">None</span>

<span class="hljs-comment"># Делай два! Пытаемся вытащить его...</span>

<span class="hljs-comment"># ... с исключениями</span>
<span class="hljs-keyword">try</span>:
    print(meme_status.text.strip()) 
<span class="hljs-comment"># Ежели возникает ошибка, статус не найден, выдаём пустоту.</span>
<span class="hljs-keyword">except</span>:
    print(<span class="hljs-string">"Exception"</span>)

<span class="hljs-comment"># ... с проверкой на пустой элемент</span>
<span class="hljs-keyword">if</span> meme_status:
    print(meme_status.text.strip())
<span class="hljs-keyword">else</span>:
    print(<span class="hljs-string">"Empty"</span>)</code></pre><br>
<pre><code class="python hljs">Out: 
Exception
Empty</code></pre><br>
<p>Такой код позволяет обезопасить себя от ошибок. В данном случае, мы можем переписать всю конструкцию с <code>if - else</code> в виде одной удобной строки. Эта строка проверит, полон ли респонса <code>meme_status</code> и ежели нет, то выдаст пустоту.</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># снова найдем настоящий статус</span>
properties = soup.find(<span class="hljs-string">'aside'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'left'</span>})
meme_status = properties.find(<span class="hljs-string">"dd"</span>)

meme_status = <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> meme_status <span class="hljs-keyword">else</span> meme_status.text.strip()
print(meme_status)</code></pre><br>
<pre><code class="python hljs">Out: Confirmed</code></pre><br>
<p>По аналогии можно вытащить всю остальную информацию со страницы, для чего вновь напишем функцию</p><br>
<div class="spoiler"><b class="spoiler_title">Функция для парсинга свойств мема</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getProperties</span><span class="hljs-params">(soup)</span>:</span>
    <span class="hljs-string">"""
        Возвращает список (tuple) с названием, статусом, типом, 
        годом и местом происхождения и тэгами

        soup: объект bs4.BeautifulSoup 
            суп текущей страницы

    """</span>
    <span class="hljs-comment"># название - идёт с самым большим заголовком h1, легко найти</span>
    meme_name = soup.find(<span class="hljs-string">'section'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'info'</span>}).find(<span class="hljs-string">'h1'</span>).text.strip()

    <span class="hljs-comment"># достаём все данные справа от картинки </span>
    properties = soup.find(<span class="hljs-string">'aside'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'left'</span>})

    <span class="hljs-comment"># статус идет первым - можно не уточнять класс</span>
    meme_status = properties.find(<span class="hljs-string">"dd"</span>)
    <span class="hljs-comment"># oneliner, заменяющий try-except: если тэга нет в properties, вернётся объект NoneType,</span>
    <span class="hljs-comment"># у которого аттрибут text отсутствует, и в этом случае он заменится на пустую строку</span>
    meme_status = <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> meme_status <span class="hljs-keyword">else</span> meme_status.text.strip()

    <span class="hljs-comment"># тип мема - обладает уникальным классом</span>
    meme_type = properties.find(<span class="hljs-string">'a'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'entry-type-link'</span>})
    meme_type = <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> meme_type <span class="hljs-keyword">else</span> meme_type.text 

    <span class="hljs-comment"># год происхождения первоисточника можно найти после заголовка Year, </span>
    <span class="hljs-comment"># находим заголовок, определяем родителя и ищем следущего ребенка - наш раздел</span>
    meme_origin_year = properties.find(text=<span class="hljs-string">'\nYear\n'</span>)
    meme_origin_year = <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> meme_origin_year <span class="hljs-keyword">else</span> meme_origin_year.parent.find_next()
    meme_origin_year = meme_origin_year.text.strip()

    <span class="hljs-comment"># сам первоисточник</span>
    meme_origin_place = properties.find(<span class="hljs-string">'dd'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'entry_origin_link'</span>})
    meme_origin_place = <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> meme_origin_place <span class="hljs-keyword">else</span> meme_origin_place.text.strip()

    <span class="hljs-comment"># тэги, связанные с мемом</span>
    meme_tags = properties.find(<span class="hljs-string">'dl'</span>, attrs={<span class="hljs-string">'id'</span>:<span class="hljs-string">'entry_tags'</span>}).find(<span class="hljs-string">'dd'</span>)
    meme_tags = <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> meme_tags <span class="hljs-keyword">else</span> meme_tags.text.strip()

    <span class="hljs-keyword">return</span> meme_name, meme_status, meme_type, meme_origin_year, meme_origin_place, meme_tags</code></pre></div></div><br>
<pre><code class="python hljs">getProperties(soup)</code></pre><br>
<pre><code class="python hljs">Out:
(<span class="hljs-string">'Doge'</span>,
 <span class="hljs-string">'Confirmed'</span>,
 <span class="hljs-string">'Animal'</span>,
 <span class="hljs-string">'2013'</span>,
 <span class="hljs-string">'Tumblr'</span>,
 <span class="hljs-string">'animal, dog, shiba inu, shibe, such doge, super shibe, japanese, super, tumblr, much, very, many, comic sans, photoshop meme, such, shiba, shibe doge, doges, dogges, reddit, comic sans ms, tumblr meme, hacked, bitcoin, dogecoin, shitposting, stare, canine'</span>)</code></pre><br>
<p>Свойства мема собрали. Теперь собираем по аналогии его текстовое описание.</p><br>
<div class="spoiler"><b class="spoiler_title">Функция для парсинга текстового описания мема</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getText</span><span class="hljs-params">(soup)</span>:</span>
    <span class="hljs-string">"""
        Возвращает текстовые описания мема

        soup: объект bs4.BeautifulSoup 
            суп текущей страницы

    """</span>

    <span class="hljs-comment"># достаём все тексты под картинкой</span>
    body = soup.find(<span class="hljs-string">'section'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'bodycopy'</span>})

    <span class="hljs-comment"># раздел about (если он есть), должен идти первым, берем его без уточнения класса</span>
    meme_about = body.find(<span class="hljs-string">'p'</span>)
    meme_about = <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> meme_about <span class="hljs-keyword">else</span> meme_about.text

    <span class="hljs-comment"># раздел origin можно найти после заголовка Origin или History, </span>
    <span class="hljs-comment"># находим заголовок, определяем родителя и ищем следущего ребенка - наш раздел</span>
    meme_origin = body.find(text=<span class="hljs-string">'Origin'</span>) <span class="hljs-keyword">or</span> body.find(text=<span class="hljs-string">'History'</span>)
    meme_origin = <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> meme_origin <span class="hljs-keyword">else</span> meme_origin.parent.find_next().text

    <span class="hljs-comment"># весь остальной текст (если он есть) можно запихнуть в одно текстовое поле</span>
    <span class="hljs-keyword">if</span> body.text:
        other_text = body.text.strip().split(<span class="hljs-string">'\n'</span>)[<span class="hljs-number">4</span>:]
        other_text = <span class="hljs-string">" "</span>.join(other_text).strip()
    <span class="hljs-keyword">else</span>:
        other_text = <span class="hljs-string">""</span>

    <span class="hljs-keyword">return</span> meme_about, meme_origin, other_text</code></pre></div></div><br>
<pre><code class="python hljs">meme_about, meme_origin, other_text = getText(soup)

print(<span class="hljs-string">"О чем мем:\n{}\n\nПроисхождение:\n{}\n\nОстальной текст:\n{}...\n"</span>\
      .format(meme_about, meme_origin, other_text[:<span class="hljs-number">200</span>]))</code></pre><br>
<pre><code class="python hljs">Out:
О чем мем:
Doge <span class="hljs-keyword">is</span> a slang term <span class="hljs-keyword">for</span> “dog” that <span class="hljs-keyword">is</span> primarily associated <span class="hljs-keyword">with</span> pictures of Shiba Inus (nicknamed “Shibe”) <span class="hljs-keyword">and</span> internal monologue captions on Tumblr. These photos may be photoshopped to change the dog’s face <span class="hljs-keyword">or</span> captioned <span class="hljs-keyword">with</span> interior monologues <span class="hljs-keyword">in</span> Comic Sans font.

Происхождение:
The use of the misspelled word “doge” to refer to a dog dates back to June <span class="hljs-number">24</span>th, <span class="hljs-number">2005</span>, when it was mentioned <span class="hljs-keyword">in</span> an episode of Homestar Runner’s puppet show. In the episode titled “Biz Cas Fri <span class="hljs-number">1</span>”[<span class="hljs-number">2</span>], Homestar calls Strong Bad his “d-o-g-e” <span class="hljs-keyword">while</span> trying to distract him <span class="hljs-keyword">from</span> his work.

Остальной текст:
Identity On February <span class="hljs-number">23</span>rd, <span class="hljs-number">2010</span>, Japanese kindergarten teacher Atsuko Sato posted several photos of her rescue-adopted Shiba Inu dog Kabosu to her personal blog.[<span class="hljs-number">38</span>] Among the photos included a peculi...</code></pre><br>
<p>Наконец, создадим функцию, возвращающую всю информацию по текущему мему</p><br>
<div class="spoiler"><b class="spoiler_title">Функция, возвращающая все данные по мему</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getMemeData</span><span class="hljs-params">(meme_page)</span>:</span>
    <span class="hljs-string">"""
        Запрашивает данные по странице, возвращает обработанный словарь с данными

        meme_page: string
            ссылка на страницу с мемом

    """</span>

    <span class="hljs-comment"># запрашиваем данные по ссылке</span>
    response = requests.get(meme_page, headers={<span class="hljs-string">'User-Agent'</span>: UserAgent().chrome})

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> response.ok:
        <span class="hljs-comment"># если сервер нам отказал, вернем статус ошибки </span>
        <span class="hljs-keyword">return</span> response.status_code

    <span class="hljs-comment"># получаем содержимое страницы и переводим в суп</span>
    html = response.content
    soup = BeautifulSoup(html,<span class="hljs-string">'html.parser'</span>)

    <span class="hljs-comment"># используя ранее написанные функции парсим информацию</span>
    views = getStats(soup=soup, stats=<span class="hljs-string">'views'</span>)
    videos = getStats(soup=soup, stats=<span class="hljs-string">'videos'</span>)
    photos = getStats(soup=soup, stats=<span class="hljs-string">'photos'</span>)
    comments = getStats(soup=soup, stats=<span class="hljs-string">'comments'</span>)

    <span class="hljs-comment"># дата</span>
    date = soup.find(<span class="hljs-string">'abbr'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'timeago'</span>}).attrs[<span class="hljs-string">'title'</span>]

    <span class="hljs-comment"># имя, статус, и т.д.</span>
    meme_name, meme_status, meme_type, meme_origin_year, meme_origin_place, meme_tags =\
    getProperties(soup=soup)

    <span class="hljs-comment"># текстовые поля</span>
    meme_about, meme_origin, other_text = getText(soup=soup)

    <span class="hljs-comment"># составляем словарь, в котором будут хранится все полученные и обработанные данные</span>
    data_row = {<span class="hljs-string">"name"</span>:meme_name, <span class="hljs-string">"status"</span>:meme_status, 
                <span class="hljs-string">"type"</span>:meme_type, <span class="hljs-string">"origin_year"</span>:meme_origin_year, 
                <span class="hljs-string">"origin_place"</span>:meme_origin_place,
                <span class="hljs-string">"date_added"</span>:date, <span class="hljs-string">"views"</span>:views, 
                <span class="hljs-string">"videos"</span>:videos, <span class="hljs-string">"photos"</span>:photos, <span class="hljs-string">"comments"</span>:comments, <span class="hljs-string">"tags"</span>:meme_tags,
                <span class="hljs-string">"about"</span>:meme_about, <span class="hljs-string">"origin"</span>:meme_origin, <span class="hljs-string">"other_text"</span>:other_text}

    <span class="hljs-keyword">return</span> data_row</code></pre></div></div><br>
<p>А теперь подготовим табличку, чтобы в неё записывать всё <del>награбленные</del> честно полученные данные, добавим в неё первую полученную строку и полюбуемся на результат</p><br>
<pre><code class="python hljs">final_df = pd.DataFrame(columns=[<span class="hljs-string">'name'</span>, <span class="hljs-string">'status'</span>, <span class="hljs-string">'type'</span>, <span class="hljs-string">'origin_year'</span>, <span class="hljs-string">'origin_place'</span>,
                                 <span class="hljs-string">'date_added'</span>, <span class="hljs-string">'views'</span>, <span class="hljs-string">'videos'</span>, <span class="hljs-string">'photos'</span>, <span class="hljs-string">'comments'</span>, 
                                 <span class="hljs-string">'tags'</span>, <span class="hljs-string">'about'</span>, <span class="hljs-string">'origin'</span>, <span class="hljs-string">'other_text'</span>])

data_row = getMemeData(<span class="hljs-string">'http://knowyourmeme.com/memes/doge'</span>)
final_df = final_df.append(data_row, ignore_index=<span class="hljs-literal">True</span>)
final_df</code></pre><br>
<pre><code class="python hljs">Out:</code></pre><br>
<div class="table table_wrapped"><table border="1">
<thead>
<tr>
<th>name</th>
<th>status</th>
<th>type</th>
<th>origin_year</th>
<th>...</th>
</tr>
</thead>
<tbody>
<tr>
<td>Doge</td>
<td>Confirmed</td>
<td>Animal</td>
<td>2013</td>
<td>...</td>
</tr>
</tbody>
</table></div><br>
<p>Первый мем оказался в наших рукак. Еще раз убедимся что всё работает — пройдемся по списку из ссылок на мемы, полученных ранее в перменной <code>meme_links</code>.</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">for</span> meme_link <span class="hljs-keyword">in</span> meme_links:
    data_row = getMemeData(meme_link)
    final_df = final_df.append(data_row, ignore_index=<span class="hljs-literal">True</span>)</code></pre><br>
<pre><code class="python hljs">Out:</code></pre><br>
<div class="table table_wrapped"><table border="1">
<thead>
<tr>
<th>name</th>
<th>status</th>
<th>type</th>
<th>origin_year</th>
<th>...</th>
</tr>
</thead>
<tbody>
<tr>
<td>Doge</td>
<td>Confirmed</td>
<td>Animal</td>
<td>2013</td>
<td>...</td>
</tr>
</tbody>
<tbody>
<tr>
<td>Charles C. Johnson</td>
<td>Submission</td>
<td>Activist</td>
<td>2013</td>
<td>...</td>
</tr>
</tbody>
<tbody>
<tr>
<td>Bat- (Prefix)</td>
<td>Submission</td>
<td>Snowclone</td>
<td>2018</td>
<td>...</td>
</tr>
</tbody>
<tbody>
<tr>
<td>The Eric Andre Show</td>
<td>Deadpool</td>
<td>TV Show</td>
<td>2012</td>
<td>...</td>
</tr>
</tbody>
<tbody>
<tr>
<td>Hopsin</td>
<td>Submission</td>
<td>Musician</td>
<td>2003</td>
<td>...</td>
</tr>
</tbody>
</table></div><br>
<p>Отлично! Всё работает, мемы качаются, данные наполняются и всё было бы хорошо, если бы не одно но — количество запросов, которое нам придётся сделать, чтобы всё получить.</p><br>
<h1 id="2--pryachemsya-ot-strazhnikov">2. Прячемся от стражников</h1><br>
<h2 id="21-kogda-rabotayuschiy-kod-bolshe-ne-rabotaet">2.1 Когда работающий код больше не работает</h2><br>
<p>Вот он! Тот самый момент абсолютного триумфа, когда код дописан и всё, что нам, мирным собирателям, остаётся — запустить наш код на одну ночку. Кажется, что через страсть мы преобрели силу. Запускаем наш код по всем <img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/6cc46239975e7dc128b13acbee196a28.svg" alt="$1075$" data-tex="inline"> страницам с мемами. На всякий случай обернём наш цикл в <code>try-except</code>. Мало ли что там с этими мемами бывает. </p><br>
<div class="spoiler"><b class="spoiler_title">Цикл на ночь</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Немного красивых циклов. При желании пакет можно отключить и </span>
<span class="hljs-comment"># удалить команду tqdm_notebook из всех циклов</span>
<span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm_notebook

final_df = pd.DataFrame(columns=[<span class="hljs-string">'name'</span>, <span class="hljs-string">'status'</span>, <span class="hljs-string">'type'</span>, <span class="hljs-string">'origin_year'</span>, <span class="hljs-string">'origin_place'</span>,
                                 <span class="hljs-string">'date_added'</span>, <span class="hljs-string">'views'</span>, <span class="hljs-string">'videos'</span>, <span class="hljs-string">'photos'</span>, <span class="hljs-string">'comments'</span>, 
                                 <span class="hljs-string">'tags'</span>, <span class="hljs-string">'about'</span>, <span class="hljs-string">'origin'</span>, <span class="hljs-string">'other_text'</span>])

<span class="hljs-keyword">for</span> page_number <span class="hljs-keyword">in</span> tqdm_notebook(range(<span class="hljs-number">1075</span>), desc=<span class="hljs-string">'Pages'</span>):
    <span class="hljs-comment"># собрали хрефы с текущей страницы</span>
    meme_links = getPageLinks(page_number)  
    <span class="hljs-keyword">for</span> meme_link <span class="hljs-keyword">in</span> tqdm_notebook(meme_links, desc=<span class="hljs-string">'Memes'</span>, leave=<span class="hljs-literal">False</span>):
        <span class="hljs-comment"># иногда с первого раза страничка не парсится</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>):
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># пытаемся собрать по мему немного даты</span>
                data_row = getMemeData(meme_link)           
                <span class="hljs-comment"># и закидываем её в таблицу</span>
                final_df = final_df.append(data_row, ignore_index=<span class="hljs-literal">True</span>)  
                <span class="hljs-comment"># если всё получилось - выходим из внутреннего цикла</span>
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">except</span>:
                <span class="hljs-comment"># Иначе, пробуем еще несколько раз, пока не закончатся попытки</span>
                print(<span class="hljs-string">'AHTUNG! parsing once again:'</span>, meme_link)
                <span class="hljs-keyword">continue</span></code></pre></div></div><br>
<p>Сон был прекрасным! Солнце только-только взошло из-за горизонта, мы уже бежим за компьютер смотреть мемы и видим, что огромное число мемов не скачалось.</p><br>
<img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/sdnmfigmsvb9f7lxvbezsykv5ci.jpeg" data-src="https://habrastorage.org/webt/sd/nm/fi/sdnmfigmsvb9f7lxvbezsykv5ci.jpeg"><br>
<p>Конечно же, вполне естественной реакцией будет нажать на первую же ссылку, перейти в мемохранилище и увидеть, что нас забанили. Все наши реквесты остались без респонсов. </p><br>
<img data-src="https://habrastorage.org/webt/mg/ce/3j/mgce3jd8xw6dmi6lt46vpbqvvxi.png" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/mgce3jd8xw6dmi6lt46vpbqvvxi.png"><br>
<h2 id="22-tor---syn-odina">2.2 Тор — сын Одина</h2><br>
<p>Иногда серверу надоедает общаться с одним и тем же человеком, делающим кучу запросов и сервер банит его. К сожалению, не только у людей запас терпения ограничен.</p><br>
<p>Приходится маскироваться. Для такой маскировки можно использовать разные способы, более того, один из них мы уже использовали, когда притворились человеком в нашем <code>request-header</code>. Для текущей же задачи, когда нас вероломно заблокировали по IP, нужно искать способы помощнее, чтобы иметь возможность этот IP менять. Конечно, как вариант можно было бы использовать прокси-сервера, тогда мы бы имели в запасе некоторое количество разных IP адресов, которые можно подставлять по мере "забанивания". Однако в этом подходе есть пара проблем: первая — нужно где-то раздобыть эти прокси, вторая — а что если ограниченного числа адресов нам не хватит и нужно больше?</p><br>
<p>В таком случае лучше всего нам подойдёт <a href="https://www.torproject.org/">Tor</a>. Вопреки пропагандируемому мнению, Tor используется не только преступниками, педофилами и прочими нехорошими террористами. Это, мягко говоря, далеко не так, и мы, мирные собиратели данных, являемся тому подтверждением. Всем прелестям, связанным с работой Tor, можно было бы посвятить несколько больших статеек, что собственно говоря уже и сделано. Подробнее про это можно почитатать по следующим ссылкам: </p><br>
<ul>
<li><a href="https://geektimes.ru/post/277578/">Как работает Tor</a></li>
<li><a href="https://habrahabr.ru/post/204266/">Методы анонимности в сети</a></li>
<li><a href="https://habrahabr.ru/company/etagi/blog/315002/">Прокси-сервер с помощью Tor</a></li>
</ul><br>
<p>Мы же ограничимся только функциональной частью, а именно без углубления в детали опишем шаги, которые нужно предпринять для того, чтобы использовать возможности Tor для обхода блокировки. Для начала полюбуемся на свой ip-адрес. Для этого сделаем get-запрос к сайту, который возвращяет наш IP</p><br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">checkIP</span><span class="hljs-params">()</span>:</span>
    ip = requests.get(<span class="hljs-string">'http://checkip.dyndns.org'</span>).content
    soup = BeautifulSoup(ip, <span class="hljs-string">'html.parser'</span>)
    print(soup.find(<span class="hljs-string">'body'</span>).text)

checkIP()</code></pre><br>
<pre><code class="python hljs">Out: Current IP Address: <span class="hljs-number">82.198</span><span class="hljs-number">.191</span><span class="hljs-number">.130</span></code></pre><br>
<p>Заменить свой ip через Tor можно двумя путями. Простой — через браузер, а сложный — через небольшие махинации с настройками.</p><br>
<p>Скачаем браузерный <a href="https://www.torproject.org/download/download">tor</a>, чтобы лёгкий путь был совсем прост. Для сложного пути в довесок к браузеру поставим tor через консоль. </p><br>
<ul>
<li>Linux — нам поможет команда <code>apt-get install tor</code>, </li>
<li>Mac — сделаем это <a href="https://www.torproject.org/docs/tor-doc-osx.html.en">в рамках brew</a>, <code>brew install tor</code>. </li>
<li>Windows — нам поможет установка другой операционной системы. </li>
</ul><br>
<h2 id="23-put-pervyy">2.3 Путь первый</h2><br>
<p>Теперь запускаем свежескачанный браузер и оставляем его открытым. Менять ip нам поможет библиотека <code>PySocks</code>. Конечно же, её нужно установить, скопировав в терминал <code>pip3 install PySocks</code>. </p><br>
<p>Браузер тора по умолчанию использует порт номер 9150. В питоне при помощи библиотек socks и socket можно задать дефолтный порт для подключения. В результате текущая сессия будет использовать именно этот порт при отправке любого запроса, а значит – запросы будут посылаться из-под запущенного тора.</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> socks
<span class="hljs-keyword">import</span> socket
socks.set_default_proxy(socks.SOCKS5, <span class="hljs-string">"localhost"</span>, <span class="hljs-number">9150</span>)
socket.socket = socks.socksocket</code></pre><br>
<p>Посмотрим на свой новый ip-aдрес.</p><br>
<pre><code class="python hljs">checkIP()</code></pre><br>
<pre><code class="python hljs">Out: Current IP Address: <span class="hljs-number">51.15</span><span class="hljs-number">.92</span><span class="hljs-number">.24</span></code></pre><br>
<p>При сопутствующем желании, <a href="http://ru.smart-ip.net/geoip">можно выяснить</a> из какой страны в данный момент мы сидим в интернете.</p><br>
<p>Ого… бывший член Европейского союза!</p><br>
<img data-src="https://habrastorage.org/webt/zi/en/tt/zienttk5uytovnrxrx2bzuqfcrg.png" data-width="350" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/zienttk5uytovnrxrx2bzuqfcrg.png" width="350"><br>
<p>Попробуем обратиться к мемохранилищу с нового ip-адреса.</p><br>
<pre><code class="python hljs">data_row = getMemeData(<span class="hljs-string">'http://knowyourmeme.com/memes/doge'</span>)

<span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> data_row.items():
    print(key.capitalize()+<span class="hljs-string">":"</span>, str(value)[:<span class="hljs-number">200</span>], end=<span class="hljs-string">'\n\n'</span>)</code></pre><br>
<pre><code class="python hljs">Out:
Name: Doge

Status: Confirmed

Type: Animal

Origin_year: <span class="hljs-number">2013</span>

Origin_place: Tumblr

Date_added: <span class="hljs-number">2017</span><span class="hljs-number">-12</span><span class="hljs-number">-31</span>T01:<span class="hljs-number">59</span>:<span class="hljs-number">14</span><span class="hljs-number">-05</span>:<span class="hljs-number">00</span>

Views: <span class="hljs-number">12318185</span>

Videos: <span class="hljs-number">59</span>

Photos: <span class="hljs-number">1645</span>

Comments: <span class="hljs-number">918</span>

Tags: animal, dog, shiba inu, shibe, such doge, super shibe, japanese, super, tumblr, much, very, many, comic sans, photoshop meme, such, shiba, shibe doge, doges, dogges, reddit, comic sans ms, tumblr meme

About: Doge <span class="hljs-keyword">is</span> a slang term <span class="hljs-keyword">for</span> “dog” that <span class="hljs-keyword">is</span> primarily associated <span class="hljs-keyword">with</span> pictures of Shiba Inus (nicknamed “Shibe”) <span class="hljs-keyword">and</span> internal monologue captions on Tumblr...</code></pre><br>
<p>Бан снят. Стражники мемов ничего не заподозрили и пустили нас в сокровищницу. Чашу нашего респонса снова переполняет контент. Через силу мы обрели мощь. </p><br>
<p>При желании, можно выяснить одну занимательную вещь: при базовых настройках, Тор-браузер меняет ip каждые 10 минут. Но что делать, если сервер банит нас быстрее? Всё просто, в папке, куда был установлен Tor найдём файлик с настройками под названием torrc (на маке он лежит по адресу <code>~/Library/Application Support/TorBrowser-Data/torrc</code>, если не получится найти — добро пожаловать <a href="https://tor.stackexchange.com/questions/11866/cant-find-torrc-file-on-mac">сюда</a>) и отредактируем его. Добавим строки: </p><br>
<pre><code class="hljs yaml"><span class="hljs-string">CircuitBuildTimeout</span> <span class="hljs-number">10</span>
<span class="hljs-string">LearnCircuitBuildTimeout</span> <span class="hljs-number">0</span>
<span class="hljs-string">MaxCircuitDirtiness</span> <span class="hljs-number">10</span></code></pre><br>
<p>Минимально возможный период для обновления ip составляет 10 секунд. Установим туда эту цифру и попробуем поиграться. </p><br>
<pre><code class="python hljs"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>):
    checkIP()
    time.sleep(<span class="hljs-number">5</span>)</code></pre><br>
<pre><code class="python hljs">Out:
Current IP Address: <span class="hljs-number">89.31</span><span class="hljs-number">.57</span><span class="hljs-number">.5</span>
Current IP Address: <span class="hljs-number">93.174</span><span class="hljs-number">.93</span><span class="hljs-number">.71</span>
Current IP Address: <span class="hljs-number">62.210</span><span class="hljs-number">.207</span><span class="hljs-number">.52</span>
Current IP Address: <span class="hljs-number">209.141</span><span class="hljs-number">.43</span><span class="hljs-number">.42</span>
Current IP Address: <span class="hljs-number">209.141</span><span class="hljs-number">.43</span><span class="hljs-number">.42</span>
Current IP Address: <span class="hljs-number">162.247</span><span class="hljs-number">.72</span><span class="hljs-number">.216</span>
Current IP Address: <span class="hljs-number">185.220</span><span class="hljs-number">.101</span><span class="hljs-number">.17</span>
Current IP Address: <span class="hljs-number">193.171</span><span class="hljs-number">.202</span><span class="hljs-number">.150</span>
Current IP Address: <span class="hljs-number">128.31</span><span class="hljs-number">.0</span><span class="hljs-number">.13</span>
Current IP Address: <span class="hljs-number">185.163</span><span class="hljs-number">.1</span><span class="hljs-number">.11</span></code></pre><br>
<p>Действительно, смена ip происходит примерно раз в 10 секунд. Для наших целей по скачке мемов было достаточно и базовых настроек. Бан наступал примерно через 20 минут после начала работы кода. </p><br>
<ol>
<li>Открываем браузер;</li>
<li>Запускаем кусок кода с подгрузкой библиотек;</li>
<li>Запускаем цикл по мемам </li>
<li>.....</li>
<li>Profit</li>
</ol><br>
<div class="spoiler"><b class="spoiler_title">Еще один цикл на ночь</b><div class="spoiler_text"><pre><code class="python hljs">final_df = pd.DataFrame(columns=[<span class="hljs-string">'name'</span>, <span class="hljs-string">'status'</span>, <span class="hljs-string">'type'</span>, <span class="hljs-string">'origin_year'</span>, <span class="hljs-string">'origin_place'</span>,
                                 <span class="hljs-string">'date_added'</span>, <span class="hljs-string">'views'</span>, <span class="hljs-string">'videos'</span>, <span class="hljs-string">'photos'</span>, <span class="hljs-string">'comments'</span>, 
                                 <span class="hljs-string">'tags'</span>, <span class="hljs-string">'about'</span>, <span class="hljs-string">'origin'</span>, <span class="hljs-string">'other_text'</span>])

<span class="hljs-keyword">for</span> page_number <span class="hljs-keyword">in</span> tqdm_notebook(range(<span class="hljs-number">1075</span>), desc=<span class="hljs-string">'Pages'</span>):
    <span class="hljs-comment"># собрали хрефы с текущей страницы</span>
    meme_links = getPageLinks(page_number)  
    <span class="hljs-keyword">for</span> meme_link <span class="hljs-keyword">in</span> tqdm_notebook(meme_links, desc=<span class="hljs-string">'Memes'</span>, leave=<span class="hljs-literal">False</span>):
        <span class="hljs-comment"># иногда с первого раза страничка не парсится</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>):
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># пытаемся собрать по мему немного даты</span>
                data_row = getMemeData(meme_link)           
                <span class="hljs-comment"># и закидываем её в таблицу</span>
                final_df = final_df.append(data_row, ignore_index=<span class="hljs-literal">True</span>)  
                <span class="hljs-comment"># если всё получилось - выходим из внутреннего цикла</span>
                <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">except</span>:
                <span class="hljs-comment"># Иначе, пробуем еще несколько раз, пока не закончатся попытки</span>
                <span class="hljs-keyword">continue</span>

final_df.to_csv(<span class="hljs-string">'MEMES.csv'</span>)</code></pre></div></div><br>
<p>Все мемы в наших руках. Можно приступать к варке фичей и моделированию. Через мощь мы познали победу. Остался только один вопрос: <strong>Что, если мы хотим менять ip каждый реквест?</strong></p><br>
<h2 id="24-put-vtoroy">2.4 Путь второй</h2><br>
<p>Второй путь помогает извращаться со сменой ip как угодно. Зайдём на <a href="https://github.com/alex-miller-0/Tor_Crawler">Github каких-то ребят</a> и скачаем себе их скрипт под названием <code>TorCrawler.py</code>. Все недостающие библиотеки, используемые в этом скрипте, придётся доставить. Поставим парням на репозиторий за их код звёздочку. Закинем этот скрипт либо в папку со своими библиотеками либо в папку к этому блокноту. Обратите внимание, что скрипт работает только с третьим питоном. </p><br>
<p>Перед использованием библиотечки, нужно подкрутить настройки в torrc файлике. На маке он будет лежать в папке <code>/usr/local/etc/tor/</code>, на линуксе в папке <code>/etc/tor/</code>. Проследуем по инструкции авторов скрипта. </p><br>
<ol>
<li>Генерируем в консоли пароль <code>tor --hash-password mypassword</code> </li>
<li>Открываем torrc файл в редакторе вроде <a href="https://stackoverflow.com/questions/11828270/how-to-exit-the-vim-editor">vim</a>, <a href="http://m.memegen.com/m4rnf5.jpg">nano</a> или <a href="https://atom.io/">atom</a> </li>
<li>Сохраняем пароль в наш torrc-файл в строку, которая начинается с HashedControlPassword</li>
<li>Раскоментируем строку, начинающуюся с HashedControlPassword</li>
<li>Раскоментируем (если она закоментирована) строку ControlPort 9051</li>
<li>Сохраним изменения. </li>
</ol><br>
<p>Запускаем tor в терминале. Линукс: <code>service tor start</code>, мак: <code>tor</code>.</p><br>
<p>Теперь мы готовы парсить.</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> TorCrawler <span class="hljs-keyword">import</span> TorCrawler
<span class="hljs-comment"># Создаём свой краулер, в опциях вводим пароль </span>
crawler = TorCrawler(ctrl_pass=<span class="hljs-string">'mypassword'</span>) </code></pre><br>
<p>Мы можем сделать get-запрос по аналогии с тем как делали раньше, причем ответ получим сразу в формате bs4.</p><br>
<pre><code class="python hljs">meme_page = <span class="hljs-string">'http://knowyourmeme.com/memes/doge'</span>
response = crawler.get(meme_page, headers={<span class="hljs-string">'User-Agent'</span>: UserAgent().chrome})
type(response)</code></pre><br>
<pre><code class="python hljs">Out: bs4.BeautifulSoup</code></pre><br>
<p>Находим внутри что-нибудь нужное.</p><br>
<pre><code class="python hljs">views = response.find(<span class="hljs-string">'dd'</span>, attrs={<span class="hljs-string">'class'</span>:<span class="hljs-string">'views'</span>})
views</code></pre><br>
<pre><code class="python hljs">Out: 
&lt;dd <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">views</span>" <span class="hljs-title">title</span>="12,318,185 <span class="hljs-title">Views</span>"&gt;
&lt;<span class="hljs-title">a</span> <span class="hljs-title">href</span>="/<span class="hljs-title">memes</span>/<span class="hljs-title">doge</span>" <span class="hljs-title">rel</span>="<span class="hljs-title">nofollow</span>"&gt;12,318,185&lt;/<span class="hljs-title">a</span>&gt;
&lt;/<span class="hljs-title">dd</span>&gt;</span></code></pre><br>
<p>Проверим IP адрес краулера</p><br>
<pre><code class="python hljs">crawler.ip</code></pre><br>
<pre><code class="python hljs">Out: <span class="hljs-string">'51.15.40.23'</span></code></pre><br>
<p>По дефолту краулер меняет ip каждые 25 запросов. За это отвечает параметр <code>n_requests</code>. При создании нового краулера, его можно настроить по собственному желанию. </p><br>
<pre><code class="python hljs">crawler.n_requests</code></pre><br>
<pre><code class="python hljs">Out: <span class="hljs-number">25</span></code></pre><br>
<p>Более того, ip можно при желании поменять вручную.</p><br>
<pre><code class="python hljs">crawler.rotate()</code></pre><br>
<pre><code class="python hljs">IP successfully rotated. New IP: <span class="hljs-number">62.176</span><span class="hljs-number">.4</span><span class="hljs-number">.1</span></code></pre><br>
<p>Теперь весь код для парсинга можно перевести на рельсы этого небольшого скрипта, заменив все реквесты на торовские, и менять IP адрес с каждым новым запросом. На бедный сервер внезапно обрушится огромное число запросов из всех уголков света.</p><br>
<p>Победа порвала наши оковы. Великая Сила освободила нас.</p><br>
<h2 id="zaklyuchenie">Заключение</h2><br>
<p>Напоследок, хотелось бы сказать пару слов о парсинге вообще и при помощи Тора в частности. Добывать себе данные — это стильно, модно и в принципе интересно, можно получить датасеты, которых еще никто никогда не обрабатывал, сделать что-то новое, посмотреть, наконец, на все мемы мира сразу. Однако не стоит забывать, что ограничения, введенные сервером, в том числе баны, появились не просто так, а в целях защиты сайта от недоброжелательных ковровых бомбардировок запросами и DDoS-атак. К чужому труду стоит относится с уважением, и даже если у сервера никакой защиты нет, — это еще не повод неограниченно забрасывать его реквестами, особенно если это может привести к его отключению — <a href="http://sd-company.su/article/security/ddosataka-ugolovnaya-otvetstvennost">уголовное наказание</a> никто не отменял. </p><br>
<p>К тому же Тор — это всё-таки не первое решение, к которому стоит прибегать в случае проблем с парсингом. Иногда достаточно будет просто поставить в нужных местах <code>time.sleep()</code> и заполнить <code>request-header</code> информацией об операционной системе — в большинстве случаев этого должно быть достаточно для аккуратного сбора интересующей вас информации. </p><br>
<p>Успешных и безопасных вам исследований и да прибудет с вами Сила!</p><br>
<p>Авторы: Ульянкин Филипп <a href="https://habrahabr.ru/users/filfonul/" class="user_link">filfonul</a>, Сергеев Дмитрий <a href="https://habrahabr.ru/users/skolopendriy/" class="user_link">Skolopendriy</a></p><br>
<h2 id="pochitashki">Почиташки</h2><br>
<ul>
<li><a href="https://github.com/FUlyankin/Parsers/blob/master/Ryan_Mitchell_Web_Scraping_with_Python-_Collecting_Data_from_the_Modern_Web_2015.pdf">Годная книга</a> про парсинг на английском языке. </li>
<li><a href="https://jarroba.com/anonymous-scraping-by-tor-network/">Неплохая инструкция</a> о самостоятельном парсинге через Tor без использования чужих готовых классов. </li>
<li><a href="https://github.com/DmitrySerg/memology">Димин репозиторий</a> с собранным датасетом из более чем 16k мемов, а также с их исследованием и <a href="https://github.com/DmitrySerg/memology/blob/master/KnowYourMemesParser.ipynb">ноутбуком</a> с парсером.</li>
<li><a href="https://fulyankin.github.io/Parsers/">Филин репозиторий</a> с ещё парой хорошо расписаных блокнотов с парсерами. Репозиторий изначально делался как страничка факультатива для студентов. </li>
<li><a href="http://starwars.wikia.com/wiki/Code_of_the_Sith">Оригинальный кодекс</a> адепта тёмной стороны силы.</li>
</ul></div></div> <div aria-hidden="true" role="dialog" tabindex="-1" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><span class="tm-svg-icon__wrapper pswp__button pswp__button--close"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Закрыть</title> <use xlink:href="/img/megazord-v24.cee85629.svg#close"></use></svg></span> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div></div></div></div> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BPython%5D" class="tm-tags-list__link">Python</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmemes%5D" class="tm-tags-list__link">memes</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bparser%5D" class="tm-tags-list__link">parser</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BBeautifulSoup%5D" class="tm-tags-list__link">BeautifulSoup</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BTorCrawler%5D" class="tm-tags-list__link">TorCrawler</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BTor%5D" class="tm-tags-list__link">Tor</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BOpen%20Data%20Science%5D" class="tm-tags-list__link">Open Data Science</a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BODS%5D" class="tm-tags-list__link">ODS</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="https://habr.com/ru/company/ods/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании Open Data Science
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/python/" class="tm-hubs-list__link">
    Python
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/programming/" class="tm-hubs-list__link">
    Программирование
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/data_mining/" class="tm-hubs-list__link">
    Data Mining
  </a></li><li class="tm-separated-list__item"><a href="https://habr.com/ru/hub/opendata/" class="tm-hubs-list__link">
    Открытые данные
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel" style="display: none;"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 76: ↑70 и ↓6</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 76: ↑70 и ↓6" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+64</span></div> <div class="v-portal" style="display:none;"></div></div> <!----> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">73K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    368
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <div class="v-portal" style="display:none;"></div></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><div class="tm-editoral-subscription"><span class="tm-svg-icon__wrapper tm-editoral-subscription__close"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Закрыть</title> <use xlink:href="/img/megazord-v24.cee85629.svg#close"></use></svg></span> <h3 class="tm-editoral-subscription__title">
    Редакторский дайджест
  </h3> <p class="tm-editoral-subscription__description">
    Присылаем лучшие статьи раз&nbsp;в&nbsp;месяц
  </p> <form method="GET" class="tm-editoral-subscription__form"><div class="tm-input-text-decorated tm-editoral-subscription__input tm-input-text-decorated_has-label-after" name="email" placeholder="Электропочта" type="email"><!----> <input name="email" placeholder="Электропочта" type="email" class="tm-input-text-decorated__input"> <div class="tm-input-text-decorated__label tm-input-text-decorated__label_after"><button type="submit" class="tm-editoral-subscription__icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class=""><path fill="currentColor" clip-rule="evenodd" d="M19.707 11.293a1 1 0 010 1.414l-5.5 5.5a1 1 0 01-1.414-1.414L16.586 13H5a1 1 0 110-2h11.586l-3.793-3.793a1 1 0 011.414-1.414l5.5 5.5z"></path></svg></button></div></div> <!----></form></div> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="https://habr.com/ru/company/ods/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/5d0e1eb7036b66d4ff4a35ad6950cc3e.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="https://habr.com/ru/company/ods/profile/" class="tm-company-snippet__title">Open Data Science</a> <div class="tm-company-snippet__description">Крупнейшее русскоязычное Data Science сообщество</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="http://ods.ai/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/2f45ef122a4e96a36e99affd9f560c71(1).jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 49 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    41.5
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Дмитрий Сергеев</span> <a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @Skolopendriy
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Senior Data Scientist</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <div class="v-portal" style="display:none;"></div></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-client-rendered"><div class="tm-article-comments"><div class="tm-comments-wrapper"><div class="tm-comments-wrapper__wrapper"><header class="tm-comments-wrapper__header"><h2 class="tm-comments-wrapper__title">
        Комментарии
        <span class="tm-comments-wrapper__comments-count">
          42
        </span></h2> <div class="tm-comments-wrapper__header-aside"><button class="tm-rss-button tm-rss-button_comments-header"><span class="tm-svg-icon__wrapper tm-rss-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Скопировать ссылку на RSS</title> <use xlink:href="/img/megazord-v24.cee85629.svg#rss"></use></svg></span></button> <!----></div></header> <div class="tm-comments-wrapper__inner"> <div class="tm-comments__tree"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10616918" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10616918" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/scronheim/" class="tm-user-info__userpic" title="scronheim"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_blue"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/scronheim/" class="tm-user-info__username">
      scronheim
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10616918" class="tm-comment-thread__comment-link">
                15.01.2018 в 14:25
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Спасибо за статью! Фраза про EA просто топ</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 2: ↑1 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 2: ↑1 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10616918" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617058" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617058" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/evis_dev/" class="tm-user-info__userpic" title="evis_dev"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/ff109bd6af14fca2a6165654c9fa2cc6.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/evis_dev/" class="tm-user-info__username">
      evis_dev
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617058" class="tm-comment-thread__comment-link">
                15.01.2018 в 15:26
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Может, чем ходить через тор, проще (и лучше по отношению к серверу) было ограничить rps? Вполне возможно, что заблокировали не просто из-за количества запросов, а именно из-за rps.<br>
<br>
Кстати говоря, увидев заголовок статьи, изначально ожидал встретить в статье описание обхода 429 Too Many Requests.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617058" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617112" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617112" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/HDDimon/" class="tm-user-info__userpic" title="HDDimon"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_green"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/HDDimon/" class="tm-user-info__username">
      HDDimon
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617112" class="tm-comment-thread__comment-link">
                15.01.2018 в 15:51
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">можете указать ссылку где можно подробно ознакомиться с предложенным вами вариантом?</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617112" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617142" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-2"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617142" class="tm-comment-thread__indent_l-2"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/evis_dev/" class="tm-user-info__userpic" title="evis_dev"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/ff109bd6af14fca2a6165654c9fa2cc6.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/evis_dev/" class="tm-user-info__username">
      evis_dev
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617142" class="tm-comment-thread__comment-link">
                15.01.2018 в 16:05
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Disclaimer: я не питонист, так что не уверен, что нагуглил правильно.<br>
<br>
Использовать <a href="https://pypi.python.org/pypi/ratelimit/1.1.0">пакет ratelimit</a> выглядит подходящим решением.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617142" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617162" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-3"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617162" class="tm-comment-thread__indent_l-3"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/HDDimon/" class="tm-user-info__userpic" title="HDDimon"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_green"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/HDDimon/" class="tm-user-info__username">
      HDDimon
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617162" class="tm-comment-thread__comment-link">
                15.01.2018 в 16:15
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">спасибо, посмотрел ссылку, по сути все сводится к уменьшению числа запросов за единицу времени</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617162" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617178" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-4"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617178" class="tm-comment-thread__indent_l-4"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/evis_dev/" class="tm-user-info__userpic" title="evis_dev"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/ff109bd6af14fca2a6165654c9fa2cc6.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/evis_dev/" class="tm-user-info__username">
      evis_dev
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617178" class="tm-comment-thread__comment-link">
                15.01.2018 в 16:21
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Да. Собственно, rps и расшифровывается как «requests per second».</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617178" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10622848" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-5"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10622848" class="tm-comment-thread__indent_l-5"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/denaspireone/" class="tm-user-info__userpic" title="denaspireone"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/6d5d8b717b9a1c245ecfd4b104440d9d.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/denaspireone/" class="tm-user-info__username">
      denaspireone
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10622848" class="tm-comment-thread__comment-link">
                18.01.2018 в 13:12
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Другое дело, если админ берет и банит любые обращения с сети Тор. Вот просто напрочь и фаерволом и на самом Nginx — и тогда только урезание rps спасает, да и то не всегда. Попробуйте использовать ipv6 посдети и списки proxy.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10622848" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section></div> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617824" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-2"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617824" class="tm-comment-thread__indent_l-2"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__userpic" title="devalone"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__username">
      devalone
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617824" class="tm-comment-thread__comment-link">
                15.01.2018 в 23:58
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">А чего там сложного? Просто добавить ограничение на количество запросов, самый простой вариант, добавить банально sleep после каждого запроса</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617824" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617346" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617346" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header tm-comment__header_is-by-op"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__userpic" title="Skolopendriy"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/2f45ef122a4e96a36e99affd9f560c71.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__username">
      Skolopendriy
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617346" class="tm-comment-thread__comment-link">
                15.01.2018 в 17:31
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml"><p>Безусловно, ограничение числа запросов было первым опробованным методом, <code>time.sleep()</code> наше всё, однако он совершенно не спасал. Во-первых, 429-я ни разу не всплывала, а во-вторых, даже при увеличении интервала между запросами до одной минуты, бан всё равно приходил. Из чего мы и сделали вывод, что блокировка происходит при любом подозрении на автоматические запросы, и поэтому стали искать новые способы обхода. </p></div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617346" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617434" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-2"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617434" class="tm-comment-thread__indent_l-2"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/schwarzstern/" class="tm-user-info__userpic" title="schwarzstern"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/schwarzstern/" class="tm-user-info__username">
      schwarzstern
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617434" class="tm-comment-thread__comment-link">
                15.01.2018 в 18:16
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml"><p>А что если рандомизировать время time.sleep()’а? </p></div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617434" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617442" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-3"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617442" class="tm-comment-thread__indent_l-3"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header tm-comment__header_is-by-op"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__userpic" title="Skolopendriy"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/2f45ef122a4e96a36e99affd9f560c71.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__username">
      Skolopendriy
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617442" class="tm-comment-thread__comment-link">
                15.01.2018 в 18:19
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Честно говоря, не пробовали, но в предыдущих проектах это не помогало. К тому же время отправки запросов и так не было распределено со строгими интервалами, некоторые страницы подгружались быстрее, некоторые медленнее, что зависело и от скорости сети, и от количества контента на странице.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617442" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10624692" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10624692" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__userpic" title="flint"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/c85d6d079833076a20b187ff8e0da913.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__username">
      flint
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10624692" class="tm-comment-thread__comment-link">
                19.01.2018 в 10:36
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Далеко не все банят очевидным 429, к слову. Многие предпочитают, например, начинать показывать капчу. Капча — тот же бан в смысле парсинга: вебсайт защищает свой контент от показа.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10624692" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617090" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617090" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/KorP/" class="tm-user-info__userpic" title="KorP"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/bb8e6803b768a2ec5d8ca4c6edc9cd98.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/KorP/" class="tm-user-info__username">
      KorP
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617090" class="tm-comment-thread__comment-link">
                15.01.2018 в 15:38
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Сам люблю писать парсеры, просто из интереса и для наблюдения. Нашёл у вас парочку полезных ссылок. Спасибо за статью!</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 3: ↑2 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 3: ↑2 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617090" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10618176" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10618176" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/KorP/" class="tm-user-info__userpic" title="KorP"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/bb8e6803b768a2ec5d8ca4c6edc9cd98.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/KorP/" class="tm-user-info__username">
      KorP
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10618176" class="tm-comment-thread__comment-link">
                16.01.2018 в 10:07
                <svg height="16" width="16" class="tm-svg-img tm-comment-thread__icon-pencil"><title>Комментарий был изменен</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pencil-small"></use></svg></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Мне казалось вчера тут ещё была часть про распараллеливание процесса?! Или мне совсем уже не хорошо?</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10618176" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10618796" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-2"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10618796" class="tm-comment-thread__indent_l-2"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header tm-comment__header_is-by-op"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__userpic" title="Skolopendriy"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/2f45ef122a4e96a36e99affd9f560c71.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__username">
      Skolopendriy
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10618796" class="tm-comment-thread__comment-link">
                16.01.2018 в 14:30
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Вчера точно не было, хотя распараллелить тут можно достаточно просто — разбить потоки по батчам страниц, например, штук по 50-100, а потом объединить в финальный датасет.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10618796" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617336" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617336" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/roycekgd/" class="tm-user-info__userpic" title="roycekgd"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_blue"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/roycekgd/" class="tm-user-info__username">
      roycekgd
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617336" class="tm-comment-thread__comment-link">
                15.01.2018 в 17:26
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Крутая статья! Спасибо ребята!</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617336" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617550" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617550" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/maaGames/" class="tm-user-info__userpic" title="maaGames"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/afc552c3e297654027229fad758b7442.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/maaGames/" class="tm-user-info__username">
      maaGames
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617550" class="tm-comment-thread__comment-link">
                15.01.2018 в 19:33
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Однозначно плюсик! Прикрутил себе прокси через Тор, добавив всего две строчки кода, я рад.<br>
Ещё бы «fake-useragent» для сишки накопать.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617550" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617614" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617614" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Gariks/" class="tm-user-info__userpic" title="Gariks"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/87c68a99d01801f42336e30f3d62ff65.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Gariks/" class="tm-user-info__username">
      Gariks
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617614" class="tm-comment-thread__comment-link">
                15.01.2018 в 20:40
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Для меня основной критерий — скорость обработки запроса, как у python обстоят дела со скоростью сетевых запросов? Использует ли он неблокирующие сокеты или какие другие механихзмы? Есть ли смысл смотреть в сторону python если мне допустим необходимо обойти 3 000 000 сайтов?</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617614" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617704" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617704" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/werevolff/" class="tm-user-info__userpic" title="werevolff"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/367145ecf93bf4871aea694839468833.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/werevolff/" class="tm-user-info__username">
      werevolff
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617704" class="tm-comment-thread__comment-link">
                15.01.2018 в 22:10
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml"><p>Scrapy — промышленный инструмент для парсинга.</p></div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617704" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617832" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617832" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__userpic" title="devalone"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__username">
      devalone
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617832" class="tm-comment-thread__comment-link">
                16.01.2018 в 00:03
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Юзай aiohttp</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617832" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10618614" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10618614" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header tm-comment__header_is-by-op"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__userpic" title="Skolopendriy"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/2f45ef122a4e96a36e99affd9f560c71.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__username">
      Skolopendriy
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10618614" class="tm-comment-thread__comment-link">
                16.01.2018 в 13:36
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Честно говоря, до промышленных систем в таких масштабах дело не доходило, но можно посмотреть в сторону вот этих ребят — <a href="https://scrapinghub.com/">scrapinghub.com</a>. Они как раз разрабатывают платформу, позволяющую быстро, эффективно и масштабируемо собирать данные.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10618614" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10624636" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-2"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10624636" class="tm-comment-thread__indent_l-2"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__userpic" title="flint"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/c85d6d079833076a20b187ff8e0da913.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__username">
      flint
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10624636" class="tm-comment-thread__comment-link">
                19.01.2018 в 10:16
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Да, у нас как раз есть решение, которое может помочь с банами: <a href="https://scrapinghub.com/crawlera">Crawlera</a>.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10624636" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10624680" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10624680" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__userpic" title="flint"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/c85d6d079833076a20b187ff8e0da913.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__username">
      flint
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10624680" class="tm-comment-thread__comment-link">
                19.01.2018 в 10:32
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Ирония заключается в том, что для промышленных скраперов язык совершенно неважен, важно написать его быстро, без ошибок и устойчивым к изменениям со стороны самого сайта.<br>
<br>
Дело в том, что многие вебсайты — особенно популярные, которые представляют интерес с точки зрения данных, — так или иначе защищаются от скрапинга, поэтому довольно быстро вы сами себе по рукам начнете давать, ограничивая количество запросов с секунду, чтобы не получить лишний бан. Либо будете ограничивать RPS, чтобы вебсайт не накатал abuse report на ваши действия, которые быстро покажутся подозрительными.<br>
<br>
В случае масштабных кравлов (3000000 сайтов) быстро понадобится какая-то инфраструктура, и там язык уж точно не будет ботлнеком. Посмотрите на <a href="https://github.com/scrapinghub/frontera/">Frontera</a>, как раз-таки промышленный инструмент для подобной задачи.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10624680" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10625426" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-2"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10625426" class="tm-comment-thread__indent_l-2"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__userpic" title="devalone"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__username">
      devalone
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10625426" class="tm-comment-thread__comment-link">
                19.01.2018 в 15:26
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">А если просто прикинуться гуглоботом?)</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10625426" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10625802" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-3"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10625802" class="tm-comment-thread__indent_l-3"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__userpic" title="flint"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/c85d6d079833076a20b187ff8e0da913.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__username">
      flint
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10625802" class="tm-comment-thread__comment-link">
                19.01.2018 в 19:57
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">У которого всем <a href="https://www.distilnetworks.com/bot-directory/bot/googlebot2-1/">известные подсети</a>.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10625802" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10626002" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-4"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10626002" class="tm-comment-thread__indent_l-4"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__userpic" title="devalone"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__username">
      devalone
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10626002" class="tm-comment-thread__comment-link">
                19.01.2018 в 23:06
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Ну, есть ещё куча других поисковых систем и невозможно IP адреса всех знать и хранить.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10626002" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section></div> <!----></section></div> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617620" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617620" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Alexsey/" class="tm-user-info__userpic" title="Alexsey"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/de91184045b541420885547220096db6.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Alexsey/" class="tm-user-info__username">
      Alexsey
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617620" class="tm-comment-thread__comment-link">
                15.01.2018 в 20:49
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">А я даже и не думал использовать тор для автоматизированного обхода ip блокировок. Спасибо за идею!</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617620" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617814" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617814" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__userpic" title="devalone"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__username">
      devalone
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617814" class="tm-comment-thread__comment-link">
                15.01.2018 в 23:49
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Чем использовать тор, лучше было бы поставить ограничение на количество запросов в единицу времени. А ещё лучше использовать aiohttp, requests блокирующий и как следствие медленный. Также тор часто банят и IP не так много, поэтому лучше взять прокси. Если хорошо, поискать, можно в открытых источниках найти несколько тысяч(ну или купить платные). <a href="https://github.com/DevAlone/proxy_py">github.com/DevAlone/proxy_py</a> в зависимости от времени суток количество проксей меняется от тысячи, почти до 9 тысяч. Если сделать пул проксей, где хранить информацию о времени последнего запроса(для ограничения количества запросов) и периодически обновлять его(удалять мёртвые прокси и добавлять свежие), то получится очень производительный парсер.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 2: ↑1 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 2: ↑1 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617814" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10617912" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10617912" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header tm-comment__header_is-by-op"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__userpic" title="Skolopendriy"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/2f45ef122a4e96a36e99affd9f560c71.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__username">
      Skolopendriy
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10617912" class="tm-comment-thread__comment-link">
                16.01.2018 в 02:04
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Ограничения на число запросов в разных конфигурациях конечно же пробовали, к сожалению, не помогло. Тор активно банят, да и переключение между разными выходами — дело медленное, но все-таки выходных узлов достаточно для того, чтобы забаненные IP не повторялись, а в исследовательских целях, когда сам парсер лишь промежуточный инструмент, а не конечный продукт, можно и подождать. <br>
Прокси — замечательный вариант, если действительно хорошо поискать или заплатить надежным поставщикам, но хотелось поэкспериментировать именно с тором и его передресацией запросов. А за ссылку большое спасибо, наверняка не раз в будущем пригодится!</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10617912" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10618828" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10618828" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/user-vova/" class="tm-user-info__userpic" title="user-vova"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_blue"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/user-vova/" class="tm-user-info__username">
      user-vova
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10618828" class="tm-comment-thread__comment-link">
                16.01.2018 в 14:52
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml"><p>Зачем для простых запросов тянуть библиотеку requests, основанную на другой сторонней библиотеке urllib3, которая, в свою очередь, является надстройкой над стандартными средствами python. Чем стандартный urllib не устроил?</p></div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10618828" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10619904" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10619904" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/el777/" class="tm-user-info__userpic" title="el777"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/b8adea985be0dc73018ad05b1fd3ec9a.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/el777/" class="tm-user-info__username">
      el777
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10619904" class="tm-comment-thread__comment-link">
                16.01.2018 в 22:27
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml"><p>Интересный вариант как введение в скрэпинг, что из чего состоит и как работает. Если делать всерьез, то лучше взять scrapy — она это все умеет.<br>
Пример. Когда-то давно, в качестве развлечения написал парсер задач с веблансера. Она сам запускается в 16 покотоков и за полминуты он выдал мне тысячи задач в виде CSV.</p><br>
<p>Код простой донельзя (и его можно еще сократить):</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> urljoin
<span class="hljs-keyword">from</span> scrapy <span class="hljs-keyword">import</span> Spider, Request

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WeblancerParser</span><span class="hljs-params">(Spider)</span>:</span>
    name = <span class="hljs-string">'wbl_prj'</span>
    allowed_domains = [<span class="hljs-string">"www.weblancer.net"</span>]
    _url = <span class="hljs-string">'http://www.weblancer.net/projects/'</span>

    _extract_fields = (
        (<span class="hljs-string">'title'</span>, <span class="hljs-string">'h2.title &gt; a'</span>),
        (<span class="hljs-string">'categories'</span>, <span class="hljs-string">'a.text-muted'</span>),
        (<span class="hljs-string">'price'</span>, <span class="hljs-string">'div.amount.title'</span>),
        (<span class="hljs-string">'apps'</span>, <span class="hljs-string">'.text-nowrap'</span>),
    )

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">start_requests</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">yield</span> self.make_requests_from_url(self._url)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">parse</span><span class="hljs-params">(self, response)</span>:</span>
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> response.css(<span class="hljs-string">'div.cols_table.container-fluid &gt; div.row'</span>):
            <span class="hljs-keyword">yield</span> dict(
                (k, <span class="hljs-string">'|'</span>.join(c.strip()
                             <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> row.css(v+<span class="hljs-string">'::text'</span>).extract()))
                <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> self._extract_fields
            )

        <span class="hljs-keyword">for</span> link <span class="hljs-keyword">in</span> response.css(<span class="hljs-string">'ul.pagination &gt; li &gt; a::attr(href)'</span>):
            <span class="hljs-keyword">yield</span> Request(urljoin(self._url, link.extract()))</code></pre></div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10619904" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10622854" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10622854" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/livington/" class="tm-user-info__userpic" title="livington"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/livington/" class="tm-user-info__username">
      livington
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10622854" class="tm-comment-thread__comment-link">
                18.01.2018 в 13:14
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Отличная статья, но у меня почему-то <a href="http://knowyourmeme.com/">knowyourmeme.com</a> входит в число запрещенных сайтов, причем при попытке делать запрос используя Tor, вылетает 403 ошибка) Думаю про пути обхода такого рода сайтов задавать вопрос вообще неуместно, или это выходит за рамки этой статьи?)</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10622854" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10622856" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-1"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10622856" class="tm-comment-thread__indent_l-1"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header tm-comment__header_is-by-op"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__userpic" title="Skolopendriy"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/2f45ef122a4e96a36e99affd9f560c71.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Skolopendriy/" class="tm-user-info__username">
      Skolopendriy
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10622856" class="tm-comment-thread__comment-link">
                18.01.2018 в 13:15
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">А можно полюбопытствовать, что значит «входит в число запрещенных» — провайдер блокирует доступ или администратор рабочей сети не даёт мемесы посмотреть? :)</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10622856" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10623430" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-2"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10623430" class="tm-comment-thread__indent_l-2"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/livington/" class="tm-user-info__userpic" title="livington"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/livington/" class="tm-user-info__username">
      livington
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10623430" class="tm-comment-thread__comment-link">
                18.01.2018 в 16:55
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Провайдер заблокировал, но по по решению органов государственной власти Российской Федерации.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10623430" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10624122" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-3"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10624122" class="tm-comment-thread__indent_l-3"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__userpic" title="devalone"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__username">
      devalone
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10624122" class="tm-comment-thread__comment-link">
                18.01.2018 в 22:22
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Лол, и вправду <a href="https://eais.rkn.gov.ru/">eais.rkn.gov.ru</a><br>
<img src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/image-loader.svg" data-src="https://habrastorage.org/webt/ey/aw/4q/eyaw4qmrgfbv9jgwv5kn-scdku0.png"></div></div> <!----> <div aria-hidden="true" role="dialog" tabindex="-1" class="pswp tm-comment__gallery"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><span class="tm-svg-icon__wrapper pswp__button pswp__button--close"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Закрыть</title> <use xlink:href="/img/megazord-v24.cee85629.svg#close"></use></svg></span> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div></div></div></div></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10624122" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10624972" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-4"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10624972" class="tm-comment-thread__indent_l-4"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/livington/" class="tm-user-info__userpic" title="livington"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/livington/" class="tm-user-info__username">
      livington
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10624972" class="tm-comment-thread__comment-link">
                19.01.2018 в 12:33
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">ну теперь собсно вопрос как это обойти, потому что даже используя описываемый в статье способ через tor, приводит к ошибке 403</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10624972" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <div class="tm-comment-thread__children"><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10625412" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-5"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10625412" class="tm-comment-thread__indent_l-5"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__userpic" title="devalone"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/devalone/" class="tm-user-info__username">
      devalone
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10625412" class="tm-comment-thread__comment-link">
                19.01.2018 в 15:18
                <!----></a></span></span></div> <div class="tm-comment__buttons"><button type="button" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon"><title>Показать предыдущий комментарий</title> <use xlink:href="/img/megazord-v24.cee85629.svg#small-arrow"></use></svg></button> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Просто возможно выходная нода заблокированна сайтом knowyourmeme.com, т.к. tor шифрованный и ркн не может фильтровать сайты внутри тор трафика.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10625412" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> <!----></section></div> <!----></section></div> <!----></section></div> <!----></section></div> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10623404" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10623404" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/wiygn/" class="tm-user-info__userpic" title="wiygn"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/8d718dd233a2e81ada418c0e52f3e1ae.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/wiygn/" class="tm-user-info__username">
      wiygn
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10623404" class="tm-comment-thread__comment-link">
                18.01.2018 в 16:48
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml"><blockquote>Теперь запускаем свежескачанный браузер и оставляем его открытым. </blockquote><br>
Вместо Tor Browser можно использовать обычный tor-сервис (в том числе и под виндой, категоричный отказ от которой выглядит просто нелепо). Не нужно будет ничего держать открытым, что особенно актуально на серверах.<br>
<br>
По поводу смены Tor-сессии.<br>
Это делается через передачу на ControlPort сервиса сигнала (<code>NEWNYM</code>) по TCP-сокету, зачем городить костыли с конфигами совсем не понятно.<br>
<br>
Если лень/не умеете работать с сокетами, то всё уже сделано за вас: <a href="https://stem.torproject.org/">stem.torproject.org</a><br>
<br>
На большинстве крупных ресурсов подсети выходных нод тора тупо забанены, поэтому часто не панацея.<br>
<br>
Если нужны свободные пулы, то легче агрегировать, проверять и ротировать публичные прокси самописным микросервисом и дёргать доступные прокси уже через него.<br>
<br>
Совсем ленивые могут купить приватных проксей.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10623404" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10623880" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10623880" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/PsyHaSTe/" class="tm-user-info__userpic" title="PsyHaSTe"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/7631ac5e5a7e237a937f5f2a74ae4c9e.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/PsyHaSTe/" class="tm-user-info__username">
      PsyHaSTe
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10623880" class="tm-comment-thread__comment-link">
                18.01.2018 в 19:56
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Перевод отличный, статья неплохая, но вброс про Windows вообще как-то чужеродно видится… Есть разработчики и под эту платформу, и на этой платформе.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10623880" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10624694" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10624694" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__userpic" title="flint"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/c85d6d079833076a20b187ff8e0da913.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/flint/" class="tm-user-info__username">
      flint
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10624694" class="tm-comment-thread__comment-link">
                19.01.2018 в 10:40
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Прикинуться определенным юзерагентом — это здравая мысль, но помогает только в самых простых случаях. Еще нужно отправлять те хедеры, что посылает тот браузер, под который идет закос, причем очень желательно посылать в том же порядке, в котором их сам браузер и расставляет.</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10624694" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_10626622" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="10626622" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/Sudo/" class="tm-user-info__userpic" title="Sudo"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_green"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/Sudo/" class="tm-user-info__username">
      Sudo
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_10626622" class="tm-comment-thread__comment-link">
                20.01.2018 в 16:03
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">Что-то мне подсказывает, что в <a href="http://knowyourmeme.com/robots.txt">robots.txt</a> можно подсмотреть нужный delay и юзер-агент<br>
А в <a href="http://knowyourmeme.com/memes/confirmed/sitemap.xml">sitemap.xml</a> получить все ссылки на мемы без кроулинга</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="10626622" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section><section class="tm-comment-thread"><!----> <article class="tm-comment-thread__comment"><a name="comment_19248327" class="tm-comment-thread__target"></a> <button class="tm-comment-thread__breadcrumbs tm-comment-thread__indent_b_l-0"><div class="tm-comment-thread__circle"></div></button> <!----> <div data-comment-body="19248327" class="tm-comment-thread__indent_l-0"><div data-gallery-root="" class="tm-comment"><header data-comment-header="" tabindex="-1" class="tm-comment__header"><div class="tm-comment__header-inner"><span class="tm-user-info tm-comment__user-info"><a href="https://habr.com/ru/users/icmizer/" class="tm-user-info__userpic" title="icmizer"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/6c7c28a61edbfd456dd521870d4ad6e7.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="https://habr.com/ru/users/icmizer/" class="tm-user-info__username">
      icmizer
    </a> <a href="https://habr.com/ru/company/ods/blog/346632/#comment_19248327" class="tm-comment-thread__comment-link">
                17.10.2018 в 22:41
                <!----></a></span></span></div> <div class="tm-comment__buttons"><!----> <!----></div></header> <div class="tm-comment__body-content"><div xmlns="http://www.w3.org/1999/xhtml">I get an error:<br>
urllib.error.URLError: &lt;urlopen error PySocks doesn't support IPv6: ('2604:1380:1000:af00::1', 80, 0, 0)&gt;<br>
how to be in this case?</div></div> <!----> <!----></div> <div class="tm-comment-footer"><div class="tm-votes-meter tm-comment-footer__votes-meter"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Комментарий пока не оценивали</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Комментарий пока не оценивали" class="tm-votes-meter__value tm-votes-meter__value_small">0</span></div> <button type="button" class="tm-comment-thread__button">
                  Ответить
                </button> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-comment-footer__button tm-comment-footer__button_with-icon"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <!----></button> <button data-comment-popup="19248327" class="tm-comment__button tm-comment__button_with-icon"><svg height="16" width="16" class="tm-svg-img tm-comment__icon tm-comment__icon_dots"><title>Ещё</title> <use xlink:href="/img/megazord-v24.cee85629.svg#dots"></use></svg></button> <!----></div></div></article> <!----> <!----></section></div> </div></div> <div class="tm-notice tm-comments__comment-notice tm-notice_positive"><!----> <div class="tm-notice__inner"><!----> <div class="tm-notice__content"><span>Только полноправные пользователи могут оставлять комментарии. <a rel="nofollow" href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/company/ods/blog/346632/&amp;hl=ru">Войдите</a>, пожалуйста.</span></div></div></div></div></div></div></div></div>  <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2020-01-23T11:00:04.000Z" title="2020-01-23, 14:00">23  января  2020 в 14:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="https://habr.com/ru/company/ods/blog/484148/" class="tm-article-title__link"><span>SVM. Объяснение с нуля и реализация на python. Подробный разбор метода опорных векторов</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 52: ↑51 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 52: ↑51 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+50</span></div> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">49K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    181
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ods/blog/484148/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      5
    </span></a> <a href="https://habr.com/ru/company/ods/blog/484148/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +5
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2018-11-08T11:00:12.000Z" title="2018-11-08, 14:00">8  ноября  2018 в 14:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="https://habr.com/ru/company/ods/blog/348260/" class="tm-article-title__link"><span>Совмещение R и Python: зачем, когда и как?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 43: ↑41 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 43: ↑41 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+39</span></div> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">26K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    158
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ods/blog/348260/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      11
    </span></a> <a href="https://habr.com/ru/company/ods/blog/348260/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +11
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2017-04-24T11:00:31.000Z" title="2017-04-24, 14:00">24  апреля  2017 в 14:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="https://habr.com/ru/company/ods/blog/327242/" class="tm-article-title__link"><span>Открытый курс машинного обучения. Тема 9. Анализ временных рядов с помощью Python</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 55: ↑53 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 55: ↑53 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+51</span></div> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">213K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    463
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ods/blog/327242/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      19
    </span></a> <a href="https://habr.com/ru/company/ods/blog/327242/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +19
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li> <!----></ul></div> <!----></section>  <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-10-12T07:01:10.000Z" title="2021-10-12, 10:01">сегодня в 10:01</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="https://habr.com/ru/company/lanit/blog/581480/" class="tm-article-title__link"><span>Как служится в белорусской ИТ-роте: честный рассказ дембеля</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 153: ↑125 и ↓28</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 153: ↑125 и ↓28" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+97</span></div> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">30K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    70
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/lanit/blog/581480/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      120
    </span></a> <a href="https://habr.com/ru/company/lanit/blog/581480/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +120
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-10-11T17:15:54.000Z" title="2021-10-11, 20:15">вчера в 20:15</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="https://habr.com/ru/post/582834/" class="tm-article-title__link"><span>Новая игра позволит пользователям управлять вагонеткой механической почты в альтернативном мире России</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 69: ↑67 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 69: ↑67 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+65</span></div> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">7.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    31
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/post/582834/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      24
    </span></a> <a href="https://habr.com/ru/post/582834/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +24
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-10-12T09:00:05.000Z" title="2021-10-12, 12:00">сегодня в 12:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="https://habr.com/ru/company/ruvds/blog/582570/" class="tm-article-title__link"><span>13 заметок о 3D-печати, после 3 лет владения 3D-принтером</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 52: ↑51 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 52: ↑51 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+50</span></div> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">6.4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    58
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ruvds/blog/582570/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      17
    </span></a> <a href="https://habr.com/ru/company/ruvds/blog/582570/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +17
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-10-11T16:00:43.000Z" title="2021-10-11, 19:00">вчера в 19:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="https://habr.com/ru/company/lightmap/blog/582168/" class="tm-article-title__link"><span>Перешли всем отделом геймдизайна на Notion. Полёт нормальный</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 44: ↑44 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 44: ↑44 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+44</span></div> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">8.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    76
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/lightmap/blog/582168/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      10
    </span></a> <a href="https://habr.com/ru/company/lightmap/blog/582168/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +10
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-10-11T20:17:50.000Z" title="2021-10-11, 23:17">вчера в 23:17</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="https://habr.com/ru/post/582888/" class="tm-article-title__link"><span>Как я снял кольца Сатурна на ТЕЛЕФОН</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 49: ↑46 и ↓3</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 49: ↑46 и ↓3" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+43</span></div> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">10K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    14
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/post/582888/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      26
    </span></a> <a href="https://habr.com/ru/post/582888/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +26
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li> <!----></ul></div> <!----></section> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_stick-bottom"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_stick-bottom" style="margin-top: 0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2015-03-11T21:00:00.000Z" title="2015-03-12, 00:00">12  марта  2015</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="http://ods.ai/" target="_blank" class="tm-company-basic-info__link">
      ods.ai
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    5 001–10 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2017-02-16T19:05:46.000Z" title="2017-02-16, 22:05">16  февраля  2017</time></dd></dl> <!----></div></div> <!----></section> <div class="tm-company-widgets"><section class="tm-block tm-block_spacing-bottom" type="links"><header class="tm-block__header"><h2 class="tm-block__title">Ссылки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-widget-links__list"><li class="tm-widget-links__item"><a href="http://ods.ai/" rel="nofollow noreferrer" target="_blank" class="tm-widget-links__link">Присоединиться к сообществу ODS</a> <small class="tm-widget-links__host">ods.ai</small></li></ul></div> <!----></section></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Блог на Хабре</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-sidebar tm-article-snippet-block-sidebar_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-17T14:37:27.000Z" title="2021-09-17, 17:37">17  сентября   в 17:37</time></div></div> <h2 class="tm-article-title tm-article-title_sidebar"><a href="https://habr.com/ru/company/ods/blog/578598/" class="tm-article-title__link"><span>Новый запуск курса Natural Language Processing</span></a></h2> <div class="tm-data-icons"><!----> <!----> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.4K</span></span> <!----> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ods/blog/578598/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      7
    </span></a> <a href="https://habr.com/ru/company/ods/blog/578598/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +7
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-sidebar tm-article-snippet-block-sidebar_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-08-26T11:06:06.000Z" title="2021-08-26, 14:06">26  августа   в 14:06</time></div></div> <h2 class="tm-article-title tm-article-title_sidebar"><a href="https://habr.com/ru/company/ods/blog/572264/" class="tm-article-title__link"><span>Анализ вакансий и зарплат в Data Science</span></a></h2> <div class="tm-data-icons"><!----> <!----> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">20K</span></span> <!----> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ods/blog/572264/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      16
    </span></a> <a href="https://habr.com/ru/company/ods/blog/572264/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +16
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-sidebar tm-article-snippet-block-sidebar_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-08-04T11:00:01.000Z" title="2021-08-04, 14:00">4  августа   в 14:00</time></div></div> <h2 class="tm-article-title tm-article-title_sidebar"><a href="https://habr.com/ru/company/ods/blog/571012/" class="tm-article-title__link"><span>О квантовых компьютерах, биткоине и превосходстве. Лекция открытого курса qmlcourse</span></a></h2> <div class="tm-data-icons"><!----> <!----> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">6.1K</span></span> <!----> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ods/blog/571012/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      4
    </span></a> <a href="https://habr.com/ru/company/ods/blog/571012/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +4
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-sidebar tm-article-snippet-block-sidebar_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-06-03T07:25:13.000Z" title="2021-06-03, 10:25">3  июня   в 10:25</time></div></div> <h2 class="tm-article-title tm-article-title_sidebar"><a href="https://habr.com/ru/company/ods/blog/560312/" class="tm-article-title__link"><span>Создание и балансировка инвестиционного портфеля с помощью ML</span></a></h2> <div class="tm-data-icons"><!----> <!----> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">14K</span></span> <!----> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ods/blog/560312/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      20
    </span></a> <a href="https://habr.com/ru/company/ods/blog/560312/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +20
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-sidebar tm-article-snippet-block-sidebar_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-06-01T11:00:13.000Z" title="2021-06-01, 14:00">1  июня   в 14:00</time></div></div> <h2 class="tm-article-title tm-article-title_sidebar"><a href="https://habr.com/ru/company/ods/blog/560154/" class="tm-article-title__link"><span>Учиться, учиться, и ещё раз учиться?</span></a></h2> <div class="tm-data-icons"><!----> <!----> <span class="tm-icon-counter tm-data-icons__item" title="Количество просмотров"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">8.7K</span></span> <!----> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="https://habr.com/ru/company/ods/blog/560154/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      2
    </span></a> <a href="https://habr.com/ru/company/ods/blog/560154/comments/" class="tm-article-comments-counter-link__link"><span title="Читать новые комментарии" class="tm-article-comments-counter-link__unread-counter">
      +2
    </span></a></div> <!----> <div class="v-portal" style="display: none;"></div></div></article></li> <!----></ul></div> <!----></section></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/company/ods/blog/346632/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/kek/v1/auth/habrahabr-register/?back=/ru/company/ods/blog/346632/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habr.com/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <div class="v-portal" style="display:none;"></div> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="https://habr.com/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="https://habr.com/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="https://habr.com/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"><!----></div></div>

<script src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/chunk-vendors.7ca1c786.js.download" defer=""></script><script src="./Парсим мемы в питоне_ как обойти серверную блокировку _ Хабр_files/app.e9bf5e28.js.download" defer=""></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  


<div><div><div class="Vue-Toastification__container top-left"></div></div><div><div class="Vue-Toastification__container top-center"></div></div><div><div class="Vue-Toastification__container top-right"></div></div><div><div class="Vue-Toastification__container bottom-left"></div></div><div><div class="Vue-Toastification__container bottom-center"></div></div><div><div class="Vue-Toastification__container bottom-right"></div></div></div><div id="K9Jn4i4Yhz" style="display: none;"></div></body></html>